!function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var e,n=document.querySelector(".profile"),r=n.querySelector(".profile__avatar"),o=n.querySelector(".profile__edit-button"),i=n.querySelector(".profile__add-button"),u=(6,function(t){if(Array.isArray(t))return t}(e=document.querySelectorAll(".popup"))||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,c=[],a=!0,l=!1;try{for(i=(n=n.call(t)).next,0;!(a=(r=i.call(n)).done)&&(c.push(r.value),6!==c.length);a=!0);}catch(t){l=!0,o=t}finally{try{if(!a&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return c}}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,6);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,6):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],a=u[1],l=u[2],s=u[3],f=u[4],p=u[5],y=document.forms,v="#cards",b={formSelector:".popup__container",formFieldSet:".popup__content",inputSelector:".popup__item",submitButtonSelector:".popup__save-btn",inactiveButtonClass:"button_inactive",inputErrorClass:"popup__item_type_error",errorClass:"popup__item-error_active"},h=Array.from(y);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===m(o)?o:String(o)),r)}var o}var _=function(){function t(e,n){var r=e.data,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var e,n;return e=t,n=[{key:"addItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";this._container[e](t)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var t=this;this.clear(),this._renderedItems.forEach((function(e){t._renderer(e)}))}}],n&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==S(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===S(o)?o:String(o)),r)}var o}var w=function(){function t(e,n){var r=e.data,o=e.handleOpenClick,i=e.handleDeleteClick,u=e.handleLikeClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._likes=r.likes,this._name=r.name,this._link=r.link,this._owner=r.owner,this._id=r._id,this._handleOpenClick=o,this._handleDeleteClick=i,this._handleLikeClick=u,this._selector=n}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".card").cloneNode(!0)}},{key:"renderCard",value:function(){this._element=this._getTemplate(),this._setEventListeners();var t=this._element.querySelector(".card__image");return t.src=this._link,t.alt=this._name,this._element.querySelector(".card__place-name").textContent=this._name,this._showNumberLikes(),this._element}},{key:"isVerified",value:function(t){this._hasDustbin(t),this._isLiked(t)}},{key:"_hasDustbin",value:function(t){this._owner._id!==t._id&&(this._element.querySelector(".card__trash-button").style.visibility="hidden")}},{key:"_isLiked",value:function(t){this._likes.find((function(e){return e._id===t._id}))&&this._element.querySelector(".card__like-button").classList.add("card__like-button_active")}},{key:"_showNumberLikes",value:function(){this._element.querySelector(".card__likes-count").textContent=this._likes.length||void 0}},{key:"_handleLikeBtn",value:function(t){t.target.classList.toggle("card__like-button_active"),this._handleLikeClick(this._likes,this._id),this._showNumberLikes()}},{key:"handleRemover",value:function(){this._element.closest(".card").remove()}},{key:"_setEventListeners",value:function(){var t=this;this._element.querySelector(".card__image").addEventListener("click",(function(){return t._handleOpenClick(t._name,t._link)})),this._element.querySelector(".card__like-button").addEventListener("click",(function(e){return t._handleLikeBtn(e)})),this._element.querySelector(".card__trash-button").addEventListener("click",(function(){return t._handleDeleteClick(t._id)}))}}])&&g(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===k(o)?o:String(o)),r)}var o}var j=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupSelector=e}var e,n;return e=t,(n=[{key:"open",value:function(){this._popupSelector.classList.add("popup_active"),this.setEventListeners()}},{key:"close",value:function(){this._popupSelector.classList.remove("popup_active")}},{key:"setEventListeners",value:function(){var t=this,e=function e(n){("Escape"===n.key||n.target.classList.contains("popup__close-btn")||n.target.classList.contains("popup__image-container")||n.target.classList.contains("popup_active"))&&(t.close(),document.removeEventListener("keydown",e),t._popupSelector.removeEventListener("click",e))};document.addEventListener("keydown",e),this._popupSelector.addEventListener("click",e)}}])&&E(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==O(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===O(o)?o:String(o)),r)}var o}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},L.apply(this,arguments)}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=T(r);if(o){var n=T(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,t)}return e=u,(n=[{key:"open",value:function(t,e){L(T(u.prototype),"open",this).call(this);var n=this._popupSelector.querySelector(".popup__image");this._popupSelector.querySelector(".popup__title-image").textContent=t,n.src=e,n.alt=t}}])&&P(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(j);function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==R(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===R(o)?o:String(o)),r)}var o}function B(){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},B.apply(this,arguments)}function A(t,e){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A(t,e)}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}var U=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=D(r);if(o){var n=D(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n,r=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._handleFormSubmit=r,n._form=n._popupSelector.querySelector(".popup__container"),n}return e=u,(n=[{key:"close",value:function(){B(D(u.prototype),"close",this).call(this),this._form.reset(),this._isDone()}},{key:"_isDone",value:function(){this._form.querySelector(".popup__processing-btn").style.visibility="hidden"}},{key:"_process",value:function(){this._form.querySelector(".popup__processing-btn").style.visibility="visible"}},{key:"_getInputValues",value:function(){var t=this;return this._inputList=this._popupSelector.querySelectorAll(".popup__item"),this._formValues={},this._inputList.forEach((function(e){return t._formValues[e.name]=e.value})),this._formValues}},{key:"setEventListeners",value:function(){var t=this,e=function(){document.removeEventListener("keydown",n),t._popupSelector.removeEventListener("click",n),t._popupSelector.removeEventListener("submit",n)},n=function(n){"Escape"===n.key||n.target.classList.contains("popup__close-btn")||n.target.classList.contains("popup__image-container")||n.target.classList.contains("popup_active")?(t.close(),e()):n.target.classList.contains("popup__save-btn")&&(t._handleFormSubmit(t._getInputValues()),e(),t._process())};document.addEventListener("keydown",n),this._popupSelector.addEventListener("click",n),this._popupSelector.addEventListener("submit",n)}}])&&I(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(j);function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==x(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===x(o)?o:String(o)),r)}var o}function V(){return V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},V.apply(this,arguments)}function z(t,e){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z(t,e)}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}var G=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=N(r);if(o){var n=N(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===x(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,t)}return e=u,(n=[{key:"open",value:function(t){V(N(u.prototype),"open",this).call(this),this._popupSelector.querySelector(".popup__text-error").textContent=t}}])&&F(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(j);function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==H(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===H(o)?o:String(o)),r)}var o}var J=function(){function t(e){var n=e.name,r=e.about,o=e.avatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=n,this._job=r,this._avatar=o}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._name,about:this._job,avatar:this._avatar}}},{key:"setUserInfo",value:function(){document.querySelector(".profile__user-name").textContent=this._name,document.querySelector(".profile__about-me").textContent=this._job}},{key:"setAvatar",value:function(){document.querySelector(".profile__avatar").style.backgroundImage="url(".concat(this._avatar,")")}}])&&M(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==$(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===$(o)?o:String(o)),r)}var o}var Q=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._formFieldSet=e.formFieldSet,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=n}var e,n;return e=t,n=[{key:"_showInputError",value:function(t,e,n){var r=t.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),r.textContent=n,r.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t,e){var n=t.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),n.textContent="",n.classList.remove(this._errorClass)}},{key:"_isValid",value:function(t,e){e.validity.valid?this._hideInputError(t,e):this._showInputError(t,e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(t){return t.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(t,e){this._hasInvalidInput(t)?(e.classList.add(this._inactiveButtonClass),e.setAttribute("disabled",!0)):(e.classList.remove(this._inactiveButtonClass),e.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(t,e){var n=this,r=Array.from(e.querySelectorAll(this._inputSelector)),o=e.querySelector(this._submitButtonSelector);this._toggleButtonState(r,o),t.addEventListener("submit",(function(t){t.preventDefault(),setTimeout((function(){return n._toggleButtonState(r,o)}),1200)})),r.forEach((function(t){t.addEventListener("input",(function(){n._isValid(e,t),n._toggleButtonState(r,o)}))}))}},{key:"enableValidation",value:function(){var t=this,e=this._formElement;Array.from(e.querySelectorAll(this._formFieldSet)).forEach((function(n){t._setEventListeners(e,n)}))}}],n&&K(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==W(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===W(o)?o:String(o)),r)}var o}var Y=function(){function t(e){var n=e.baseUrl,r=e.headers,o=r.authorization,i=r["Content-Type"];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=n,this._authorization=o,this._contentType=i}var e,n;return e=t,n=[{key:"do",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=n?this._baseUrl+e+"/"+n:this._baseUrl+e;return fetch(r,{method:t,headers:{authorization:this._authorization}}).then((function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status,"."))}))}},{key:"send",value:function(t,e,n,r){var o=this;return fetch(this._baseUrl+e,{method:t,headers:{authorization:this._authorization,"content-Type":this._contentType},body:JSON.stringify(n())}).then((function(){return o.do("GET",null!=r?r:e)}))}}],n&&X(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Z=new Y({baseUrl:"https://around.nomoreparties.co/v1",headers:{authorization:"4f0ec2d8-0a82-401b-be94-8d93fd8bc4fc","Content-Type":"application/json"}});Z.me="/web_es_07/users/me",Z.cards="/web_es_07/cards",Z.avatar="/web_es_07/users/me/avatar",Z.likes=Z.cards+"/likes";var tt=new G(p),et=new q(l);Z.do("GET",Z.me).then((function(t){console.log(t);var e=new J(t);Z.do("GET",Z.cards).then((function(n){var u=new _({data:n,renderer:function(e){var n=new w({data:e,handleOpenClick:function(t,e){et.open(t,e)},handleDeleteClick:function(t){var e=new U({handleFormSubmit:function(){Z.do("DELETE",Z.cards,t).then(n.handleRemover()).catch((function(t){return tt.open(t)})).finally((function(){return e.close()}))}},s);e.open()},handleLikeClick:function(e,n){e.find((function(e){return e._id===t._id}))?Z.do("DELETE",Z.likes,n).then(e.pop()).catch((function(t){return tt.open(t)})):Z.do("PUT",Z.likes,n).then(e.push(t)).catch((function(t){return tt.open(t)}))}},v),r=n.renderCard();n.isVerified(t),u.addItem(r)}},".cards");u.renderItems();var c=new U({handleFormSubmit:function(e){Z.send("POST",Z.cards,(function(){return{name:(t=e).name,link:t.link};var t})).then((function(e){var n=new w({data:e[0],handleOpenClick:function(t,e){et.open(t,e)},handleDeleteClick:function(t){var e=new U({handleFormSubmit:function(){Z.do("DELETE",Z.cards,t).then(n.handleRemover()).catch((function(t){return tt.open(t)})).finally((function(){return e.close()}))}},s);e.open()},handleLikeClick:function(e,n){e.find((function(e){return e._id===t._id}))?Z.do("DELETE",Z.likes,n).then(e.pop()).catch((function(t){return tt.open(t)})):Z.do("PUT",Z.likes,n).then(e.push(t)).catch((function(t){return tt.open(t)}))}},v),r=n.renderCard();u.addItem(r,"prepend")})).catch((function(t){return tt.open(t)})).finally((function(){return c.close()}))}},a);o.onclick=function(){var t=document.forms.profileForm.elements,n=t.name,r=t.about;nt.open(),n.value=e.getUserInfo().name,r.value=e.getUserInfo().about},r.onclick=function(){return rt.open()},i.onclick=function(){return c.open()},e.setUserInfo(),e.setAvatar()})).catch((function(t){return tt.open(t)}))})).catch((function(t){return tt.open(t)}));var nt=new U({handleFormSubmit:function(t){Z.send("PATCH",Z.me,(function(){return{name:(e=t).name,about:e.about};var e})).then((function(t){var e=new J(t);e.setUserInfo(),o.onclick=function(){var t=document.forms.profileForm.elements,n=t.name,r=t.about;nt.open(),n.value=e.getUserInfo().name,r.value=e.getUserInfo().about}})).catch((function(t){return tt.open(t)})).finally((function(){return nt.close()}))}},c),rt=new U({handleFormSubmit:function(t){Z.send("PATCH",Z.avatar,(function(){return{avatar:t.avatar}}),Z.me).then((function(t){new J(t).setAvatar()})).catch((function(t){return tt.open(t)})).finally((function(){return rt.close()}))}},f);h.forEach((function(t){new Q(b,t).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3ZEZCxNQUFLLFNBQUFyRyxHQUNpQixJQUFJaUQsRUFBU2pELEdBQ3JCbUosV0FDakIsSUFDR3JCLE9BQU0sU0FBQUMsR0FBRyxPQUFHM0QsR0FBYXVELEtBQUtJLEVBQUksSUFDbENDLFNBQVEsa0JBQUtpQixHQUFXM0gsT0FBTyxHQUNwQyxHQUNDdkYsR0FFSFksRUFBU3VCLFNBQVEsU0FBQXVGLEdBQ0YsSUFBSUYsRUFBY3BILEVBQVlzSCxHQUN0QzZGLGtCQUNQLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LTJfZXNwLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtMl9lc3AvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC0yX2VzcC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LTJfZXNwLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LTJfZXNwLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LTJfZXNwLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtMl9lc3AvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEVycm9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtMl9lc3AvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtMl9lc3AvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC0yX2VzcC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtMl9lc3AvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC0yX2VzcC8uL3NyYy9zY3JpcHRzL3V0aWxzL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEJ0bnMgb24gcHJvZmlsZVxyXG5jb25zdCBwcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlXCIpO1xyXG5jb25zdCBhdmF0YXIgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcclxuY29uc3QgcHJvZmlsZUZvcm1CdG4gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IGNhcmRGb3JtQnRuID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcblxyXG4vLyBQb3AgdXBzXHJcbmNvbnN0IHBvcHVwQWN0aXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cFwiKTtcclxuXHJcbmNvbnN0IFtcclxuICBwcm9maWxlRm9ybVBvcHVwLFxyXG4gIGNhcmRGb3JtUG9wdXAsXHJcbiAgZGlzcGxheUNhcmQsXHJcbiAgZGVsZXRlRm9ybSxcclxuICBhdmF0YXJQb3B1cCxcclxuICBlcnJvclBvcHVwXHJcbl0gPSBwb3B1cEFjdGl2ZTtcclxuXHJcbmNvbnN0IGZvcm1zID0gZG9jdW1lbnQuZm9ybXM7XHJcblxyXG5jb25zdCBjYXJkVGVtcGxhdGUgPSAnI2NhcmRzJztcclxuY29uc3QgY2FyZHNDb250YWluZXIgPSAnLmNhcmRzJztcclxuXHJcbmNvbnN0IGZvcm1Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fY29udGFpbmVyXCIsXHJcbiAgZm9ybUZpZWxkU2V0OiBcIi5wb3B1cF9fY29udGVudFwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pdGVtXCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zYXZlLWJ0blwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiYnV0dG9uX2luYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pdGVtX3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19pdGVtLWVycm9yX2FjdGl2ZVwiXHJcbn1cclxuXHJcbmNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShmb3Jtcyk7XHJcblxyXG5leHBvcnQge1xyXG4gIHByb2ZpbGVGb3JtQnRuLCBjYXJkRm9ybUJ0biwgcHJvZmlsZUZvcm1Qb3B1cCwgY2FyZEZvcm1Qb3B1cCxcclxuICBkaXNwbGF5Q2FyZCwgY2FyZHNDb250YWluZXIsIGZvcm1Db25maWcsIGNhcmRUZW1wbGF0ZSwgZm9ybUxpc3QsXHJcbiAgZGVsZXRlRm9ybSwgYXZhdGFyUG9wdXAsIGF2YXRhciwgZXJyb3JQb3B1cFxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGRhdGE7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQsIHBvc2l0aW9uID0gJ2FwcGVuZCcpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lcltwb3NpdGlvbl0oZWxlbWVudClcclxuICB9XHJcblxyXG4gIGNsZWFyKCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9ICcnXHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuY2xlYXIoKVxyXG5cclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7ZGF0YSwgaGFuZGxlT3BlbkNsaWNrLCBoYW5kbGVEZWxldGVDbGljaywgaGFuZGxlTGlrZUNsaWNrfSwgc2VsZWN0b3Ipe1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9vd25lciA9IGRhdGEub3duZXI7XHJcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5faGFuZGxlT3BlbkNsaWNrID0gaGFuZGxlT3BlbkNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3JcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpLmNvbnRlbnQ7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHJldHVybiBjYXJkRWxlbWVudFxyXG4gIH1cclxuXHJcbiAgcmVuZGVyQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpO1xyXG4gICAgY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICBjYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3BsYWNlLW5hbWUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9zaG93TnVtYmVyTGlrZXMoKVxyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50XHJcbiAgfVxyXG5cclxuICBpc1ZlcmlmaWVkKHVzZXJEYXRhKSB7XHJcbiAgICB0aGlzLl9oYXNEdXN0YmluKHVzZXJEYXRhKVxyXG4gICAgdGhpcy5faXNMaWtlZCh1c2VyRGF0YSlcclxuICB9XHJcblxyXG4gIF9oYXNEdXN0YmluKHVzZXJEYXRhKSB7XHJcbiAgICBpZih0aGlzLl9vd25lci5faWQgIT09IHVzZXJEYXRhLl9pZClcclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190cmFzaC1idXR0b24nKVxyXG4gICAgICAuc3R5bGVcclxuICAgICAgLnZpc2liaWxpdHkgPSBcImhpZGRlblwiXHJcbiAgfVxyXG5cclxuICBfaXNMaWtlZCh1c2VyRGF0YSkge1xyXG4gICAgaWYodGhpcy5fbGlrZXMuZmluZChsaWtlID0+IGxpa2UuX2lkID09PSB1c2VyRGF0YS5faWQpKXtcclxuICAgICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKVxyXG4gICAgICAgIC5jbGFzc0xpc3RcclxuICAgICAgICAuYWRkKCdjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmUnKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3Nob3dOdW1iZXJMaWtlcygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlcy1jb3VudCcpXHJcbiAgICAgIC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aCB8fCB1bmRlZmluZWRcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlQnRuKGUpIHtcclxuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpXHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcy5fbGlrZXMsIHRoaXMuX2lkKVxyXG4gICAgdGhpcy5fc2hvd051bWJlckxpa2VzKClcclxuICB9XHJcblxyXG4gIGhhbmRsZVJlbW92ZXIoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LmNsb3Nlc3QoJy5jYXJkJykucmVtb3ZlKClcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZU9wZW5DbGljayhcclxuICAgICAgICB0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxyXG4gICAgICApXHJcblxyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtYnV0dG9uJylcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB0aGlzLl9oYW5kbGVMaWtlQnRuKGUpKVxyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190cmFzaC1idXR0b24nKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh0aGlzLl9pZCkpXHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LmFkZCgncG9wdXBfYWN0aXZlJyk7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKClcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9hY3RpdmUnKVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBlbmFibGVMaXN0ZW5lciA9IChlKSA9PiB7XHJcbiAgICAgIGlmKGUua2V5ID09PSAnRXNjYXBlJ1xyXG4gICAgICB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idG4nKVxyXG4gICAgICB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19pbWFnZS1jb250YWluZXInKVxyXG4gICAgICB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX2FjdGl2ZScpKXtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGVuYWJsZUxpc3RlbmVyKTtcclxuICAgICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZW5hYmxlTGlzdGVuZXIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgJ2tleWRvd24nLCBlbmFibGVMaXN0ZW5lclxyXG4gICAgKVxyXG5cclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgJ2NsaWNrJywgZW5hYmxlTGlzdGVuZXJcclxuICAgIClcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKVxyXG4gIH1cclxuXHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICBjb25zdCBkaXNwbGF5Q2FyZEltYWdlID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fdGl0bGUtaW1hZ2UnKS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBkaXNwbGF5Q2FyZEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICBkaXNwbGF5Q2FyZEltYWdlLmFsdCA9IG5hbWU7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7aGFuZGxlRm9ybVN1Ym1pdH0sIHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NvbnRhaW5lcicpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gICAgdGhpcy5faXNEb25lKClcclxuICB9XHJcblxyXG4gIF9pc0RvbmUoKSB7XHJcbiAgICB0aGlzLl9mb3JtXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3Byb2Nlc3NpbmctYnRuJylcclxuICAgICAgLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJ1xyXG4gIH1cclxuICBcclxuICBfcHJvY2VzcygpIHtcclxuICAgIHRoaXMuX2Zvcm1cclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fcHJvY2Vzc2luZy1idG4nKVxyXG4gICAgICAuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJ1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2l0ZW0nKTtcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+XHJcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSk7XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlc1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBybUV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZW5hYmxlTGlzdGVuZXIpO1xyXG4gICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZW5hYmxlTGlzdGVuZXIpO1xyXG4gICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGVuYWJsZUxpc3RlbmVyKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGVuYWJsZUxpc3RlbmVyID0gKGUpID0+IHtcclxuICAgIGlmKGUua2V5ID09PSAnRXNjYXBlJ1xyXG4gICAgICB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idG4nKVxyXG4gICAgICB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19pbWFnZS1jb250YWluZXInKVxyXG4gICAgICB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX2FjdGl2ZScpKXtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgcm1FdmVudExpc3RlbmVycygpXHJcblxyXG4gICAgICB9IGVsc2UgaWYoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fc2F2ZS1idG4nKSkge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgICAgcm1FdmVudExpc3RlbmVycygpXHJcbiAgICAgICAgdGhpcy5fcHJvY2VzcygpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAna2V5ZG93bicsIGVuYWJsZUxpc3RlbmVyXHJcbiAgICApXHJcblxyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAnY2xpY2snLCBlbmFibGVMaXN0ZW5lclxyXG4gICAgKVxyXG5cclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgJ3N1Ym1pdCcsIGVuYWJsZUxpc3RlbmVyXHJcbiAgICApXHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRXJyb3IgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3RvcilcclxuICB9XHJcblxyXG4gIG9wZW4oZXJyb3IpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3JcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fdGV4dC1lcnJvcicpXHJcbiAgICAgIC50ZXh0Q29udGVudCA9IGVycm9yXHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHtuYW1lLCBhYm91dCwgYXZhdGFyfSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2IgPSBhYm91dFxyXG4gICAgdGhpcy5fYXZhdGFyID0gYXZhdGFyXHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7bmFtZTogdGhpcy5fbmFtZSwgYWJvdXQ6IHRoaXMuX2pvYiwgYXZhdGFyOiB0aGlzLl9hdmF0YXJ9XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbygpIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX191c2VyLW5hbWUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWJvdXQtbWUnKS50ZXh0Q29udGVudCA9IHRoaXMuX2pvYjtcclxuICB9XHJcblxyXG4gIHNldEF2YXRhcigpIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dGhpcy5fYXZhdGFyfSlgXHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpe1xuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5fZm9ybUZpZWxkU2V0ID0gY29uZmlnLmZvcm1GaWVsZFNldDtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xuXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudFxuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGZpZWxkc2V0LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZpZWxkc2V0LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcblxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGZpZWxkc2V0LCBpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmaWVsZHNldC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2lzVmFsaWQoZmllbGRzZXQsIGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihmaWVsZHNldCwgaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihmaWVsZHNldCwgaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xuICAgIHJldHVybiBpbnB1dExpc3Quc29tZShpbnB1dEVsZW1lbnQgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWRcbiAgICB9KVxuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKGZvcm0sIGZpZWxkc2V0KSB7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmaWVsZHNldC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZmllbGRzZXQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgY29uc3Qgd2FpdGluZ0FwaSA9IDEyMDA7XG5cbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xuXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgc2V0VGltZW91dCgoKT0+IHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCksIHdhaXRpbmdBcGkpO1xuICAgIH0pXG5cbiAgICBpbnB1dExpc3QuZm9yRWFjaChpbnB1dEVsZW1lbnQgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9pc1ZhbGlkKGZpZWxkc2V0LCBpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIGNvbnN0IGZvcm0gPSB0aGlzLl9mb3JtRWxlbWVudDtcbiAgICBjb25zdCBmaWVsZHNldExpc3QgPSBBcnJheS5mcm9tKGZvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9mb3JtRmllbGRTZXQpKTtcblxuICAgIGZpZWxkc2V0TGlzdC5mb3JFYWNoKGZpZWxkc2V0ID0+IHtcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKGZvcm0sIGZpZWxkc2V0KTtcbiAgICB9KVxuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Ioe1xuICAgIGJhc2VVcmwsXG4gICAgaGVhZGVyczoge1xuICAgICAgYXV0aG9yaXphdGlvbixcbiAgICAgIFtcIkNvbnRlbnQtVHlwZVwiXTogQ29udGVudFR5cGVcbiAgICB9XG4gIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9hdXRob3JpemF0aW9uID0gYXV0aG9yaXphdGlvbjtcbiAgICB0aGlzLl9jb250ZW50VHlwZSA9IENvbnRlbnRUeXBlO1xuICB9XG5cbiAgLy8gR3JhY2lhcyBwb3IgbGEgZXhwbGljYWNpw7NuIGUgaW5zaXN0ZW5jaWEsIGVzcGVybyBhaG9yYSBhcHJveGltYXJtZSBjb24gZWwgcmVzdWx0YWRvXG4gIGRvKGFjdGlvbiwgZW5kUG9pbnQsIGlkID0gbnVsbCkge1xuICAgIGNvbnN0IHVybCA9IGlkXG4gICAgICA/IHRoaXMuX2Jhc2VVcmwgKyBlbmRQb2ludCArICcvJyArIGlkXG4gICAgICA6IHRoaXMuX2Jhc2VVcmwgKyBlbmRQb2ludDtcblxuICAgIHJldHVybiBmZXRjaCh1cmwsIHtcbiAgICAgIG1ldGhvZDogYWN0aW9uLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uXG4gICAgICB9XG4gICAgfSlcbiAgICAgIC50aGVuKHJlcz0+IHtcbiAgICAgICAgaWYocmVzLm9rKSByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfS5gKTtcbiAgICAgIH0pXG4gIH1cblxuICBzZW5kKGFjdGlvbiwgZW5kUG9pbnQsIHNlbmRCb2R5LCByb290KSB7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBlbmRQb2ludCwge1xuICAgICAgbWV0aG9kOiBhY3Rpb24sXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXG4gICAgICAgIFwiY29udGVudC1UeXBlXCI6IHRoaXMuX2NvbnRlbnRUeXBlXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoc2VuZEJvZHkoKSlcbiAgICB9KVxuICAgICAgLnRoZW4oKCk9PiB0aGlzLmRvKCdHRVQnLCByb290ID8/IGVuZFBvaW50KSlcbiAgfVxufSIsImltcG9ydHtcbiAgY2FyZHNDb250YWluZXIsIGZvcm1MaXN0LCBmb3JtQ29uZmlnLCBwcm9maWxlRm9ybUJ0biwgZGVsZXRlRm9ybSxcbiAgcHJvZmlsZUZvcm1Qb3B1cCwgY2FyZEZvcm1Qb3B1cCwgY2FyZEZvcm1CdG4sIGRpc3BsYXlDYXJkLCBjYXJkVGVtcGxhdGUsXG4gIGF2YXRhclBvcHVwLCBhdmF0YXIsIGVycm9yUG9wdXBcbn0gZnJvbSBcIi4vc2NyaXB0cy91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydHsgc2VuZENhcmQsIHNlbmRVc2VyLCBzZW5kQXZhdGFyIH0gZnJvbSAnLi9zY3JpcHRzL3V0aWxzL3V0aWxzLmpzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IENhcmQgZnJvbSAnLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEVycm9yIGZyb20gJy4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEVycm9yLmpzJztcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgJy4vcGFnZXMvaW5kZXguY3NzJztcbmltcG9ydCBBcGkgZnJvbSAnLi9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzJztcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI0ZjBlYzJkOC0wYTgyLTQwMWItYmU5NC04ZDkzZmQ4YmM0ZmNcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICB9XG59KVxuXG5hcGkubWUgPSAnL3dlYl9lc18wNy91c2Vycy9tZSc7XG5hcGkuY2FyZHMgPSAnL3dlYl9lc18wNy9jYXJkcyc7XG5hcGkuYXZhdGFyID0gJy93ZWJfZXNfMDcvdXNlcnMvbWUvYXZhdGFyJztcbmFwaS5saWtlcyA9IGFwaS5jYXJkcyArICcvbGlrZXMnO1xuXG5jb25zdCBlcnJvck1lc3NhZ2UgPSBuZXcgUG9wdXBXaXRoRXJyb3IoZXJyb3JQb3B1cClcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKGRpc3BsYXlDYXJkKTtcblxuYXBpLmRvKCdHRVQnLCBhcGkubWUpXG4gIC50aGVuKHVzZXJEYXRhID0+IHtcbiAgICBjb25zb2xlLmxvZyh1c2VyRGF0YSlcbiAgICBjb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKHVzZXJEYXRhKTtcblxuICAgIGFwaS5kbygnR0VUJywgYXBpLmNhcmRzKVxuICAgICAgLnRoZW4oY2FyZHMgPT4ge1xuICAgICAgICBjb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uICh7XG4gICAgICAgICAgZGF0YTogY2FyZHMsXG4gICAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xuICAgICAgICAgICAgICBkYXRhOiBpdGVtLFxuICAgICAgICAgICAgICBoYW5kbGVPcGVuQ2xpY2s6IChuYW1lLCBsaW5rKT0+IHtcbiAgICAgICAgICAgICAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKG5hbWUsIGxpbmspXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGhhbmRsZURlbGV0ZUNsaWNrOiAoaWQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkbHRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICAgICAgICAgICAgICAgICAgaGFuZGxlRm9ybVN1Ym1pdDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhcGkuZG8oJ0RFTEVURScsIGFwaS5jYXJkcywgaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2FyZC5oYW5kbGVSZW1vdmVyKCkpXG4gICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycj0+IGVycm9yTWVzc2FnZS5vcGVuKGVycikpXG4gICAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoKCk9PiBkbHRGb3JtLmNsb3NlKCkpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgZGVsZXRlRm9ybSlcbiAgICAgICAgICAgICAgICBkbHRGb3JtLm9wZW4oKVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBoYW5kbGVMaWtlQ2xpY2s6IChsaWtlcywgaWQpID0+IHtcbiAgICAgICAgICAgICAgICBpZighbGlrZXMuZmluZChsaWtlID0+IGxpa2UuX2lkID09PSB1c2VyRGF0YS5faWQpKSB7XG4gICAgICAgICAgICAgICAgICBhcGkuZG8oJ1BVVCcsIGFwaS5saWtlcywgaWQpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGxpa2VzLnB1c2godXNlckRhdGEpKVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyPT4gZXJyb3JNZXNzYWdlLm9wZW4oZXJyKSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgYXBpLmRvKCdERUxFVEUnLCBhcGkubGlrZXMsIGlkKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihsaWtlcy5wb3AoKSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycj0+IGVycm9yTWVzc2FnZS5vcGVuKGVycikpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBjYXJkVGVtcGxhdGUpO1xuICAgICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLnJlbmRlckNhcmQoKTtcbiAgICAgICAgICAgIGNhcmQuaXNWZXJpZmllZCh1c2VyRGF0YSlcbiAgICAgICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpXG4gICAgICAgICAgfVxuICAgICAgICB9LCBjYXJkc0NvbnRhaW5lcilcbiAgICAgICAgY2FyZExpc3QucmVuZGVySXRlbXMoKVxuXG4gICAgICAgIGNvbnN0IGNhcmRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0gKHtcbiAgICAgICAgICBoYW5kbGVGb3JtU3VibWl0OiAoaW5wdXQpID0+IHtcbiAgICAgICAgICAgIGFwaS5zZW5kKCdQT1NUJywgYXBpLmNhcmRzLCAoKT0+IHNlbmRDYXJkKGlucHV0KSlcbiAgICAgICAgICAgICAgLnRoZW4ob2J0YWluZWRDYXJkID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQgKHtcbiAgICAgICAgICAgICAgICAgIGRhdGE6IG9idGFpbmVkQ2FyZFswXSxcbiAgICAgICAgICAgICAgICAgIGhhbmRsZU9wZW5DbGljazogKG5hbWUsIGxpbmspID0+IHs7XG4gICAgICAgICAgICAgICAgICAgIHBvcHVwV2l0aEltYWdlLm9wZW4obmFtZSwgbGluayk7XG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgaGFuZGxlRGVsZXRlQ2xpY2s6IChpZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkbHRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUZvcm1TdWJtaXQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5kbygnREVMRVRFJywgYXBpLmNhcmRzLCBpZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2FyZC5oYW5kbGVSZW1vdmVyKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnI9PiBlcnJvck1lc3NhZ2Uub3BlbihlcnIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluYWxseSgoKT0+IGRsdEZvcm0uY2xvc2UoKSlcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIGRlbGV0ZUZvcm0pXG4gICAgICAgICAgICAgICAgICAgIGRsdEZvcm0ub3BlbigpXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgaGFuZGxlTGlrZUNsaWNrOiAobGlrZXMsIGlkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCFsaWtlcy5maW5kKGxpa2UgPT4gbGlrZS5faWQgPT09IHVzZXJEYXRhLl9pZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBhcGkuZG8oJ1BVVCcsIGFwaS5saWtlcywgaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihsaWtlcy5wdXNoKHVzZXJEYXRhKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnI9PiBlcnJvck1lc3NhZ2Uub3BlbihlcnIpKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGFwaS5kbygnREVMRVRFJywgYXBpLmxpa2VzLCBpZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGxpa2VzLnBvcCgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycj0+IGVycm9yTWVzc2FnZS5vcGVuKGVycikpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBjYXJkVGVtcGxhdGUpXG4gICAgICAgICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLnJlbmRlckNhcmQoKTtcbiAgICAgICAgICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50LCAncHJlcGVuZCcpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gZXJyb3JNZXNzYWdlLm9wZW4oZXJyKSlcbiAgICAgICAgICAgICAgLmZpbmFsbHkoKCk9PiBjYXJkRm9ybS5jbG9zZSgpKVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgY2FyZEZvcm1Qb3B1cClcblxuICAgICAgICBwcm9maWxlRm9ybUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHtuYW1lLCBhYm91dH0gPSBkb2N1bWVudC5mb3Jtcy5wcm9maWxlRm9ybS5lbGVtZW50cztcbiAgICAgICAgICB1c2VyRm9ybS5vcGVuKCk7XG4gICAgICAgICAgbmFtZS52YWx1ZSA9IHVzZXIuZ2V0VXNlckluZm8oKS5uYW1lO1xuICAgICAgICAgIGFib3V0LnZhbHVlID0gdXNlci5nZXRVc2VySW5mbygpLmFib3V0XG4gICAgICAgIH1cblxuICAgICAgICBhdmF0YXIub25jbGljayA9ICgpID0+IGF2YXRhckZvcm0ub3BlbigpXG5cbiAgICAgICAgY2FyZEZvcm1CdG4ub25jbGljayA9ICgpID0+IGNhcmRGb3JtLm9wZW4oKVxuXG4gICAgICAgIHVzZXIuc2V0VXNlckluZm8oKTtcbiAgICAgICAgdXNlci5zZXRBdmF0YXIoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IGVycm9yTWVzc2FnZS5vcGVuKGVycikpXG4gIH0pXG4gIC5jYXRjaChlcnIgPT4gZXJyb3JNZXNzYWdlLm9wZW4oZXJyKSlcblxuY29uc3QgdXNlckZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpbnB1dCkgPT4ge1xuICAgIGFwaS5zZW5kKCdQQVRDSCcsIGFwaS5tZSwgKCk9PiBzZW5kVXNlcihpbnB1dCkpXG4gICAgICAudGhlbih1c2VyRGF0YT0+IHtcbiAgICAgICAgY29uc3QgZWRpdGVkVXNlciA9IG5ldyBVc2VySW5mbyh1c2VyRGF0YSlcbiAgICAgICAgZWRpdGVkVXNlci5zZXRVc2VySW5mbygpXG4gICAgICAgIHByb2ZpbGVGb3JtQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3Qge25hbWUsIGFib3V0fSA9IGRvY3VtZW50LmZvcm1zLnByb2ZpbGVGb3JtLmVsZW1lbnRzO1xuICAgICAgICAgIHVzZXJGb3JtLm9wZW4oKTtcbiAgICAgICAgICBuYW1lLnZhbHVlID0gZWRpdGVkVXNlci5nZXRVc2VySW5mbygpLm5hbWU7XG4gICAgICAgICAgYWJvdXQudmFsdWUgPSBlZGl0ZWRVc2VyLmdldFVzZXJJbmZvKCkuYWJvdXRcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT4gZXJyb3JNZXNzYWdlLm9wZW4oZXJyKSlcbiAgICAgIC5maW5hbGx5KCgpPT4gdXNlckZvcm0uY2xvc2UoKSlcbiAgfVxufSwgcHJvZmlsZUZvcm1Qb3B1cClcblxuY29uc3QgYXZhdGFyRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0KSA9PiB7XG4gICAgYXBpLnNlbmQoJ1BBVENIJywgYXBpLmF2YXRhciwgKCk9PiBzZW5kQXZhdGFyKGlucHV0KSwgYXBpLm1lKVxuICAgICAgLnRoZW4odXNlckRhdGE9PiB7XG4gICAgICAgIGNvbnN0IGVkaXRlZEF2YXRhciA9IG5ldyBVc2VySW5mbyh1c2VyRGF0YSlcbiAgICAgICAgZWRpdGVkQXZhdGFyLnNldEF2YXRhcigpXG4gICAgfSlcbiAgICAgIC5jYXRjaChlcnI9PiBlcnJvck1lc3NhZ2Uub3BlbihlcnIpKVxuICAgICAgLmZpbmFsbHkoKCk9PiBhdmF0YXJGb3JtLmNsb3NlKCkpXG4gIH1cbn0sIGF2YXRhclBvcHVwKVxuXG5mb3JtTGlzdC5mb3JFYWNoKGZvcm1FbGVtZW50ID0+IHtcbiAgY29uc3QgZm9ybSA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1Db25maWcsIGZvcm1FbGVtZW50KTtcbiAgZm9ybS5lbmFibGVWYWxpZGF0aW9uKClcbn0pIiwiZnVuY3Rpb24gc2VuZENhcmQoZGF0YSkge1xuICByZXR1cm4ge1xuICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICBsaW5rOiBkYXRhLmxpbmtcbiAgfVxufVxuXG5mdW5jdGlvbiBzZW5kVXNlcihkYXRhKSB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogZGF0YS5uYW1lLFxuICAgIGFib3V0OiBkYXRhLmFib3V0XG4gIH1cbn1cblxuZnVuY3Rpb24gc2VuZEF2YXRhcihkYXRhKSB7XG4gIHJldHVybiB7YXZhdGFyOiBkYXRhLmF2YXRhcn1cbn1cblxuZXhwb3J0IHtzZW5kQ2FyZCwgc2VuZFVzZXIsIHNlbmRBdmF0YXJ9OyJdLCJuYW1lcyI6WyJwcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYXZhdGFyIiwicHJvZmlsZUZvcm1CdG4iLCJjYXJkRm9ybUJ0biIsIl9wb3B1cEFjdGl2ZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwcm9maWxlRm9ybVBvcHVwIiwiY2FyZEZvcm1Qb3B1cCIsImRpc3BsYXlDYXJkIiwiZGVsZXRlRm9ybSIsImF2YXRhclBvcHVwIiwiZXJyb3JQb3B1cCIsImZvcm1zIiwiY2FyZFRlbXBsYXRlIiwiZm9ybUNvbmZpZyIsImZvcm1TZWxlY3RvciIsImZvcm1GaWVsZFNldCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiZm9ybUxpc3QiLCJBcnJheSIsImZyb20iLCJTZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwiZGF0YSIsInJlbmRlcmVyIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImtleSIsInZhbHVlIiwiZWxlbWVudCIsInBvc2l0aW9uIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiaW5uZXJIVE1MIiwiX3RoaXMiLCJjbGVhciIsImZvckVhY2giLCJpdGVtIiwiQ2FyZCIsInNlbGVjdG9yIiwiaGFuZGxlT3BlbkNsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJfbGlrZXMiLCJsaWtlcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9vd25lciIsIm93bmVyIiwiX2lkIiwiX2hhbmRsZU9wZW5DbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfc2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJjYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIl9zaG93TnVtYmVyTGlrZXMiLCJ1c2VyRGF0YSIsIl9oYXNEdXN0YmluIiwiX2lzTGlrZWQiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJmaW5kIiwibGlrZSIsImNsYXNzTGlzdCIsImFkZCIsImUiLCJ0YXJnZXQiLCJ0b2dnbGUiLCJjbG9zZXN0IiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnRuIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwU2VsZWN0b3IiLCJzZXRFdmVudExpc3RlbmVycyIsImVuYWJsZUxpc3RlbmVyIiwiY29udGFpbnMiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImNhbGwiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiZGlzcGxheUNhcmRJbWFnZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsInJlc2V0IiwiX2lzRG9uZSIsIl90aGlzMiIsIl9pbnB1dExpc3QiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwiX3RoaXMzIiwicm1FdmVudExpc3RlbmVycyIsIl9nZXRJbnB1dFZhbHVlcyIsIl9wcm9jZXNzIiwiUG9wdXBXaXRoRXJyb3IiLCJlcnJvciIsIlVzZXJJbmZvIiwiYWJvdXQiLCJfam9iIiwiX2F2YXRhciIsImJhY2tncm91bmRJbWFnZSIsImNvbmNhdCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJfZm9ybUZpZWxkU2V0IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsImZpZWxkc2V0IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJzb21lIiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJmb3JtIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwicHJldmVudERlZmF1bHQiLCJzZXRUaW1lb3V0IiwiX2lzVmFsaWQiLCJBcGkiLCJiYXNlVXJsIiwiX3JlZiRoZWFkZXJzIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJDb250ZW50VHlwZSIsIl9iYXNlVXJsIiwiX2F1dGhvcml6YXRpb24iLCJfY29udGVudFR5cGUiLCJhY3Rpb24iLCJlbmRQb2ludCIsInVybCIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJzZW5kQm9keSIsInJvb3QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImRvIiwiYXBpIiwibWUiLCJjYXJkcyIsInBvcHVwV2l0aEltYWdlIiwiY29uc29sZSIsImxvZyIsInVzZXIiLCJjYXJkTGlzdCIsImNhcmQiLCJvcGVuIiwiZGx0Rm9ybSIsImhhbmRsZVJlbW92ZXIiLCJjYXRjaCIsImVyciIsImZpbmFsbHkiLCJwb3AiLCJwdXNoIiwiY2FyZEVsZW1lbnQiLCJyZW5kZXJDYXJkIiwiaXNWZXJpZmllZCIsImFkZEl0ZW0iLCJyZW5kZXJJdGVtcyIsImNhcmRGb3JtIiwic2VuZCIsIm9idGFpbmVkQ2FyZCIsIm9uY2xpY2siLCJfZG9jdW1lbnQkZm9ybXMkcHJvZmkiLCJwcm9maWxlRm9ybSIsImVsZW1lbnRzIiwidXNlckZvcm0iLCJnZXRVc2VySW5mbyIsImF2YXRhckZvcm0iLCJzZXRVc2VySW5mbyIsInNldEF2YXRhciIsImVkaXRlZFVzZXIiLCJfZG9jdW1lbnQkZm9ybXMkcHJvZmkyIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=