!function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var e,n=document.querySelector(".profile"),r=n.querySelector(".profile__avatar"),o=n.querySelector(".profile__edit-button"),i=n.querySelector(".profile__add-button"),u=(6,function(t){if(Array.isArray(t))return t}(e=document.querySelectorAll(".popup"))||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{for(i=(n=n.call(t)).next,0;!(c=(r=i.call(n)).done)&&(a.push(r.value),6!==a.length);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,6);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,6):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=u[0],c=u[1],l=u[2],s=u[3],f=u[4],p=u[5],y=document.forms,h="#cards",v={formSelector:".popup__container",formFieldSet:".popup__content",inputSelector:".popup__item",submitButtonSelector:".popup__save-btn",inactiveButtonClass:"button_inactive",inputErrorClass:"popup__item_type_error",errorClass:"popup__item-error_active"},m=Array.from(y);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===b(o)?o:String(o)),r)}var o}var _=function(){function t(e,n){var r=e.data,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var e,n;return e=t,n=[{key:"addItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";this._container[e](t)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var t=this;this.clear(),this._renderedItems.forEach((function(e){t._renderer(e)}))}}],n&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==S(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===S(o)?o:String(o)),r)}var o}var k=function(){function t(e,n){var r=e.data,o=e.handleOpenClick,i=e.handleDeleteClick,u=e.handleLikeClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._likes=r.likes,this._name=r.name,this._link=r.link,this._owner=r.owner,this._id=r._id,this._handleOpenClick=o,this._handleDeleteClick=i,this._handleLikeClick=u,this._selector=n}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".card").cloneNode(!0)}},{key:"renderCard",value:function(){this._element=this._getTemplate(),this._setEventListeners();var t=this._element.querySelector(".card__image");return t.src=this._link,t.alt=this._name,this._element.querySelector(".card__place-name").textContent=this._name,this._showNumberLikes(),this._element}},{key:"isVerified",value:function(t){this._hasDustbin(t),this._isLiked(t)}},{key:"_hasDustbin",value:function(t){this._owner._id!==t._id&&(this._element.querySelector(".card__trash-button").style.visibility="hidden")}},{key:"_isLiked",value:function(t){this._likes.find((function(e){return e._id===t._id}))&&this._element.querySelector(".card__like-button").classList.add("card__like-button_active")}},{key:"_showNumberLikes",value:function(){this._element.querySelector(".card__likes-count").textContent=this._likes.length||void 0}},{key:"_handleLikeBtn",value:function(t){t.target.classList.toggle("card__like-button_active"),this._handleLikeClick(this._likes,this._id),this._showNumberLikes()}},{key:"handleRemover",value:function(){this._element.closest(".card").remove()}},{key:"_setEventListeners",value:function(){var t=this;this._element.querySelector(".card__image").addEventListener("click",(function(){return t._handleOpenClick(t._name,t._link)})),this._element.querySelector(".card__like-button").addEventListener("click",(function(e){return t._handleLikeBtn(e)})),this._element.querySelector(".card__trash-button").addEventListener("click",(function(){return t._handleDeleteClick(t._id)}))}}])&&g(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}var j=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupSelector=e}var e,n;return e=t,(n=[{key:"open",value:function(){this._popupSelector.classList.add("popup_active"),this.setEventListeners()}},{key:"close",value:function(){this._popupSelector.classList.remove("popup_active")}},{key:"setEventListeners",value:function(){var t=this,e=function e(n){("Escape"===n.key||n.target.classList.contains("popup__close-btn")||n.target.classList.contains("popup__image-container")||n.target.classList.contains("popup_active"))&&(t.close(),document.removeEventListener("keydown",e),t._popupSelector.removeEventListener("click",e))};document.addEventListener("keydown",e),this._popupSelector.addEventListener("click",e)}}])&&O(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===E(o)?o:String(o)),r)}var o}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},C.apply(this,arguments)}function L(t,e){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},L(t,e)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=T(r);if(o){var n=T(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,t)}return e=u,(n=[{key:"open",value:function(t,e){C(T(u.prototype),"open",this).call(this);var n=this._popupSelector.querySelector(".popup__image");this._popupSelector.querySelector(".popup__title-image").textContent=t,n.src=e,n.alt=t}}])&&P(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(j);function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==R(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===R(o)?o:String(o)),r)}var o}function U(){return U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},U.apply(this,arguments)}function A(t,e){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A(t,e)}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=D(r);if(o){var n=D(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n,r=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._handleFormSubmit=r,n._form=n._popupSelector.querySelector(".popup__container"),n}return e=u,(n=[{key:"close",value:function(){U(D(u.prototype),"close",this).call(this),this._form.reset(),this._isDone()}},{key:"_isDone",value:function(){this._form.querySelector(".popup__processing-btn").style.visibility="hidden"}},{key:"_process",value:function(){this._form.querySelector(".popup__processing-btn").style.visibility="visible"}},{key:"_getInputValues",value:function(){var t=this;return this._inputList=this._popupSelector.querySelectorAll(".popup__item"),this._formValues={},this._inputList.forEach((function(e){return t._formValues[e.name]=e.value})),this._formValues}},{key:"setEventListeners",value:function(){var t=this,e=function(){document.removeEventListener("keydown",n),t._popupSelector.removeEventListener("click",n),t._popupSelector.removeEventListener("submit",n)},n=function(n){"Escape"===n.key||n.target.classList.contains("popup__close-btn")||n.target.classList.contains("popup__image-container")||n.target.classList.contains("popup_active")?(t.close(),e()):n.target.classList.contains("popup__save-btn")&&(t._handleFormSubmit(t._getInputValues()),e(),t._process())};document.addEventListener("keydown",n),this._popupSelector.addEventListener("click",n),this._popupSelector.addEventListener("submit",n)}}])&&I(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(j);function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==z(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===z(o)?o:String(o)),r)}var o}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},F.apply(this,arguments)}function V(t,e){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},V(t,e)}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}var H=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=N(r);if(o){var n=N(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,t)}return e=u,(n=[{key:"open",value:function(t){F(N(u.prototype),"open",this).call(this),this._popupSelector.querySelector(".popup__text-error").textContent=t}}])&&x(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(j);function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==J(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===J(o)?o:String(o)),r)}var o}var G=function(){function t(e){var n=e.name,r=e.about,o=e.avatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=n,this._job=r,this._avatar=o}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._name,about:this._job,avatar:this._avatar}}},{key:"setUserInfo",value:function(){document.querySelector(".profile__user-name").textContent=this._name,document.querySelector(".profile__about-me").textContent=this._job}},{key:"setAvatar",value:function(){document.querySelector(".profile__avatar").style.backgroundImage="url(".concat(this._avatar,")")}}])&&M(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==$(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===$(o)?o:String(o)),r)}var o}var Q=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._formFieldSet=e.formFieldSet,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=n}var e,n;return e=t,n=[{key:"_showInputError",value:function(t,e,n){var r=t.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),r.textContent=n,r.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t,e){var n=t.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),n.textContent="",n.classList.remove(this._errorClass)}},{key:"_isValid",value:function(t,e){e.validity.valid?this._hideInputError(t,e):this._showInputError(t,e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(t){return t.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(t,e){this._hasInvalidInput(t)?(e.classList.add(this._inactiveButtonClass),e.setAttribute("disabled",!0)):(e.classList.remove(this._inactiveButtonClass),e.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(t,e){var n=this,r=Array.from(e.querySelectorAll(this._inputSelector)),o=e.querySelector(this._submitButtonSelector);this._toggleButtonState(r,o),t.addEventListener("submit",(function(t){t.preventDefault(),setTimeout((function(){return n._toggleButtonState(r,o)}),1200)})),r.forEach((function(t){t.addEventListener("input",(function(){n._isValid(e,t),n._toggleButtonState(r,o)}))}))}},{key:"enableValidation",value:function(){var t=this,e=this._formElement;Array.from(e.querySelectorAll(this._formFieldSet)).forEach((function(n){t._setEventListeners(e,n)}))}}],n&&K(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==W(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===W(o)?o:String(o)),r)}var o}var Y=new(function(){function t(e){var n=e.baseUrl,r=e.headers,o=r.authorization,i=r["Content-Type"];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=n,this._authorization=o,this._contentType=i,this._me="/web_es_07/users/me",this._cards="/web_es_07/cards",this._avatar="/web_es_07/users/me/avatar",this._likes=this._cards+"/likes/"}var e,n;return e=t,(n=[{key:"_then",value:function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status,"."))}},{key:"getUserData",value:function(){var t=this;return fetch(this._baseUrl+this._me,{method:"GET",headers:{authorization:this._authorization}}).then((function(e){return t._then(e)}))}},{key:"sendUserForm",value:function(t){var e=this;return fetch(this._baseUrl+this._me,{method:"PATCH",headers:{authorization:this._authorization,"content-Type":this._contentType},body:JSON.stringify({name:t.name,about:t.about})}).then((function(t){return e._then(t)}))}},{key:"sendAvatar",value:function(t){var e=this;return fetch(this._baseUrl+this._avatar,{method:"PATCH",headers:{authorization:this._authorization,"content-Type":this._contentType},body:JSON.stringify({avatar:t.avatar})}).then((function(t){return e._then(t)}))}},{key:"getCards",value:function(){var t=this;return fetch(this._baseUrl+this._cards,{method:"GET",headers:{authorization:this._authorization}}).then((function(e){return t._then(e)}))}},{key:"postCard",value:function(t){var e=this;return fetch(this._baseUrl+this._cards,{method:"POST",headers:{authorization:this._authorization,"Content-Type":this._contentType},body:JSON.stringify({name:t.name,link:t.link})}).then((function(t){return e._then(t)}))}},{key:"rmCard",value:function(t){var e=this;return fetch("".concat(this._baseUrl).concat(this._cards,"/").concat(t),{method:"DELETE",headers:{authorization:this._authorization}}).then((function(t){return e._then(t)}))}},{key:"putLike",value:function(t){var e=this;return fetch(this._baseUrl+this._likes+t,{method:"PUT",headers:{authorization:this._authorization}}).then((function(t){return e._then(t)}))}},{key:"rmLike",value:function(t){var e=this;return fetch(this._baseUrl+this._likes+t,{method:"DELETE",headers:{authorization:this._authorization}}).then((function(t){return e._then(t)}))}}])&&X(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}())({baseUrl:"https://around.nomoreparties.co/v1",headers:{authorization:"4f0ec2d8-0a82-401b-be94-8d93fd8bc4fc","Content-Type":"application/json"}}),Z=new H(p),tt=new q(l);Y.getUserData().then((function(t){var e=new G(t);Y.getCards().then((function(n){var u=new _({data:n,renderer:function(e){var n=new k({data:e,handleOpenClick:function(t,e){tt.open(t,e)},handleDeleteClick:function(t){var e=new B({handleFormSubmit:function(){Y.rmCard(t).then(n.handleRemover()).catch((function(t){return Z.open(t)})).finally((function(){return setTimeout(e.close(),250)}))}},s);e.open()},handleLikeClick:function(e,n){e.find((function(e){return e._id===t._id}))?Y.rmLike(n).then(e.pop()).catch((function(t){return Z.open(t)})):Y.putLike(n).then(e.push(t)).catch((function(t){return Z.open(t)}))}},h),r=n.renderCard();n.isVerified(t),u.addItem(r)}},".cards");u.renderItems();var a=new B({handleFormSubmit:function(e){Y.postCard(e).then((function(){Y.getCards().then((function(e){var n=new k({data:e[0],handleOpenClick:function(t,e){tt.open(t,e)},handleDeleteClick:function(t){var e=new B({handleFormSubmit:function(){Y.rmCard(t).then(n.handleRemover()).catch((function(t){return Z.open(t)})).finally((function(){return setTimeout(e.close(),250)}))}},s);e.open()},handleLikeClick:function(e,n){e.find((function(e){return e._id===t._id}))?Y.rmLike(n).then(e.pop()).catch((function(t){return Z.open(t)})):Y.putLike(n).then(e.push(t)).catch((function(t){return Z.open(t)}))}},h),r=n.renderCard();u.addItem(r,"prepend")})).catch((function(t){return Z.open(t)})).finally(a.close())})).catch((function(t){return Z.open(t)}))}},c);o.onclick=function(){var t=document.forms.profileForm.elements,n=t.name,r=t.about;et.open(),n.value=e.getUserInfo().name,r.value=e.getUserInfo().about},r.onclick=function(){return nt.open()},i.onclick=function(){return a.open()},e.setUserInfo(),e.setAvatar()})).catch((function(t){return Z.open(t)}))})).catch((function(t){return Z.open(t)}));var et=new B({handleFormSubmit:function(t){Y.sendUserForm(t).then((function(){Y.getUserData().then((function(t){var e=new G(t);e.setUserInfo(),o.onclick=function(){var t=document.forms.profileForm.elements,n=t.name,r=t.about;et.open(),n.value=e.getUserInfo().name,r.value=e.getUserInfo().about}})).catch((function(t){return Z.open(t)})).finally(et.close())})).catch((function(t){return Z.open(t)}))}},a),nt=new B({handleFormSubmit:function(t){Y.sendAvatar(t).then((function(){Y.getUserData().then((function(t){new G(t).setAvatar()})).catch((function(t){return Z.open(t)})).finally(nt.close())}))}},f);m.forEach((function(t){new Q(v,t).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUlBQ0EsSSxFQUFNQSxFQUFVQyxTQUFTQyxjQUFjLFlBQ2pDQyxFQUFTSCxFQUFRRSxjQUFjLG9CQUMvQkUsRUFBaUJKLEVBQVFFLGNBQWMseUJBQ3ZDRyxFQUFjTCxFQUFRRSxjQUFjLHdCQUsxQ0ksR0FPZSxFLDRDQVRLTCxTQUFTTSxpQkFBaUIsWSxxekJBRzVDQyxFQUFnQkYsRUFBQSxHQUNoQkcsRUFBYUgsRUFBQSxHQUNiSSxFQUFXSixFQUFBLEdBQ1hLLEVBQVVMLEVBQUEsR0FDVk0sRUFBV04sRUFBQSxHQUNYTyxFQUFVUCxFQUFBLEdBR05RLEVBQVFiLFNBQVNhLE1BRWpCQyxFQUFlLFNBR2ZDLEVBQWEsQ0FDakJDLGFBQWMsb0JBQ2RDLGFBQWMsa0JBQ2RDLGNBQWUsZUFDZkMscUJBQXNCLG1CQUN0QkMsb0JBQXFCLGtCQUNyQkMsZ0JBQWlCLHlCQUNqQkMsV0FBWSw0QkFHUkMsRUFBV0MsTUFBTUMsS0FBS1osRyx1cUJDakNQYSxFQUFPLFdBQzFCLFNBQUFBLEVBQUFDLEVBQWdDQyxHQUFtQixJQUFyQ0MsRUFBSUYsRUFBSkUsS0FBTUMsRUFBUUgsRUFBUkcsVSw0RkFBUUMsQ0FBQSxLQUFBTCxHQUMxQk0sS0FBS0MsZUFBaUJKLEVBQ3RCRyxLQUFLRSxVQUFZSixFQUNqQkUsS0FBS0csV0FBYW5DLFNBQVNDLGNBQWMyQixFQUMzQyxDLFFBZ0JDLE8sRUFoQkFGLEUsRUFBQSxFQUFBVSxJQUFBLFVBQUFDLE1BRUQsU0FBUUMsR0FBOEIsSUFBckJDLEVBQVFDLFVBQUFDLE9BQUEsUUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUcsU0FDMUJSLEtBQUtHLFdBQVdJLEdBQVVELEVBQzVCLEdBQUMsQ0FBQUYsSUFBQSxRQUFBQyxNQUVELFdBQ0VMLEtBQUtHLFdBQVdRLFVBQVksRUFDOUIsR0FBQyxDQUFBUCxJQUFBLGNBQUFDLE1BRUQsV0FBYyxJQUFBTyxFQUFBLEtBQ1paLEtBQUthLFFBRUxiLEtBQUtDLGVBQWVhLFNBQVEsU0FBQUMsR0FDMUJILEVBQUtWLFVBQVVhLEVBQ2pCLEdBQ0YsSSx1RUFBQ3JCLENBQUEsQ0FyQnlCLEcsdXFCQ0FQc0IsRUFBSSxXQUN2QixTQUFBQSxFQUFBckIsRUFBeUVzQixHQUFTLElBQXJFcEIsRUFBSUYsRUFBSkUsS0FBTXFCLEVBQWV2QixFQUFmdUIsZ0JBQWlCQyxFQUFpQnhCLEVBQWpCd0Isa0JBQW1CQyxFQUFlekIsRUFBZnlCLGlCLDRGQUFlckIsQ0FBQSxLQUFBaUIsR0FDcEVoQixLQUFLcUIsT0FBU3hCLEVBQUt5QixNQUNuQnRCLEtBQUt1QixNQUFRMUIsRUFBSzJCLEtBQ2xCeEIsS0FBS3lCLE1BQVE1QixFQUFLNkIsS0FDbEIxQixLQUFLMkIsT0FBUzlCLEVBQUsrQixNQUNuQjVCLEtBQUs2QixJQUFNaEMsRUFBS2dDLElBQ2hCN0IsS0FBSzhCLGlCQUFtQlosRUFDeEJsQixLQUFLK0IsbUJBQXFCWixFQUMxQm5CLEtBQUtnQyxpQkFBbUJaLEVBQ3hCcEIsS0FBS2lDLFVBQVloQixDQUNuQixDLFFBeUVDLE8sRUF6RUFELEcsRUFBQSxFQUFBWixJQUFBLGVBQUFDLE1BRUQsV0FHRSxPQUZxQnJDLFNBQVNDLGNBQWMrQixLQUFLaUMsV0FBV0MsUUFDM0JqRSxjQUFjLFNBQVNrRSxXQUFVLEVBRXBFLEdBQUMsQ0FBQS9CLElBQUEsYUFBQUMsTUFFRCxXQUNFTCxLQUFLb0MsU0FBV3BDLEtBQUtxQyxlQUNyQnJDLEtBQUtzQyxxQkFFTCxJQUFNQyxFQUFZdkMsS0FBS29DLFNBQVNuRSxjQUFjLGdCQU05QyxPQUxBc0UsRUFBVUMsSUFBTXhDLEtBQUt5QixNQUNyQmMsRUFBVUUsSUFBTXpDLEtBQUt1QixNQUNyQnZCLEtBQUtvQyxTQUFTbkUsY0FBYyxxQkFBcUJ5RSxZQUFjMUMsS0FBS3VCLE1BQ3BFdkIsS0FBSzJDLG1CQUVFM0MsS0FBS29DLFFBQ2QsR0FBQyxDQUFBaEMsSUFBQSxhQUFBQyxNQUVELFNBQVd1QyxHQUNUNUMsS0FBSzZDLFlBQVlELEdBQ2pCNUMsS0FBSzhDLFNBQVNGLEVBQ2hCLEdBQUMsQ0FBQXhDLElBQUEsY0FBQUMsTUFFRCxTQUFZdUMsR0FDUDVDLEtBQUsyQixPQUFPRSxNQUFRZSxFQUFTZixNQUNoQzdCLEtBQUtvQyxTQUNGbkUsY0FBYyx1QkFDZDhFLE1BQ0FDLFdBQWEsU0FDbEIsR0FBQyxDQUFBNUMsSUFBQSxXQUFBQyxNQUVELFNBQVN1QyxHQUNKNUMsS0FBS3FCLE9BQU80QixNQUFLLFNBQUFDLEdBQUksT0FBSUEsRUFBS3JCLE1BQVFlLEVBQVNmLEdBQUcsS0FDbkQ3QixLQUFLb0MsU0FDRm5FLGNBQWMsc0JBQ2RrRixVQUNBQyxJQUFJLDJCQUVYLEdBQUMsQ0FBQWhELElBQUEsbUJBQUFDLE1BRUQsV0FDRUwsS0FBS29DLFNBQ0ZuRSxjQUFjLHNCQUNkeUUsWUFBYzFDLEtBQUtxQixPQUFPWixhQUFVQyxDQUN6QyxHQUFDLENBQUFOLElBQUEsaUJBQUFDLE1BRUQsU0FBZWdELEdBQ2JBLEVBQUVDLE9BQU9ILFVBQVVJLE9BQU8sNEJBQzFCdkQsS0FBS2dDLGlCQUFpQmhDLEtBQUtxQixPQUFRckIsS0FBSzZCLEtBQ3hDN0IsS0FBSzJDLGtCQUNQLEdBQUMsQ0FBQXZDLElBQUEsZ0JBQUFDLE1BRUQsV0FDRUwsS0FBS29DLFNBQVNvQixRQUFRLFNBQVNDLFFBQ2pDLEdBQUMsQ0FBQXJELElBQUEscUJBQUFDLE1BRUQsV0FBcUIsSUFBQU8sRUFBQSxLQUNuQlosS0FBS29DLFNBQ0ZuRSxjQUFjLGdCQUNkeUYsaUJBQWlCLFNBQVMsa0JBQU05QyxFQUFLa0IsaUJBQ3BDbEIsRUFBS1csTUFBT1gsRUFBS2EsTUFBTSxJQUczQnpCLEtBQUtvQyxTQUNGbkUsY0FBYyxzQkFDZHlGLGlCQUFpQixTQUFTLFNBQUFMLEdBQUMsT0FBSXpDLEVBQUsrQyxlQUFlTixFQUFFLElBRXhEckQsS0FBS29DLFNBQ0ZuRSxjQUFjLHVCQUNkeUYsaUJBQWlCLFNBQVMsa0JBQU05QyxFQUFLbUIsbUJBQW1CbkIsRUFBS2lCLElBQUksR0FDdEUsTSxvRUFBQ2IsQ0FBQSxDQXBGc0IsRyx1cUJDQUo0QyxFQUFLLFdBQ3hCLFNBQUFBLEVBQVlDLEksNEZBQWU5RCxDQUFBLEtBQUE2RCxHQUN6QjVELEtBQUs4RCxlQUFpQkQsQ0FDeEIsQyxRQThCQyxPLEVBOUJBRCxHLEVBQUEsRUFBQXhELElBQUEsT0FBQUMsTUFFRCxXQUNFTCxLQUFLOEQsZUFBZVgsVUFBVUMsSUFBSSxnQkFDbENwRCxLQUFLK0QsbUJBQ1AsR0FBQyxDQUFBM0QsSUFBQSxRQUFBQyxNQUVELFdBQ0VMLEtBQUs4RCxlQUFlWCxVQUFVTSxPQUFPLGVBQ3ZDLEdBQUMsQ0FBQXJELElBQUEsb0JBQUFDLE1BRUQsV0FBb0IsSUFBQU8sRUFBQSxLQUNab0QsRUFBaUIsU0FBakJBLEVBQWtCWCxJQUNULFdBQVZBLEVBQUVqRCxLQUNGaUQsRUFBRUMsT0FBT0gsVUFBVWMsU0FBUyxxQkFDNUJaLEVBQUVDLE9BQU9ILFVBQVVjLFNBQVMsMkJBQzVCWixFQUFFQyxPQUFPSCxVQUFVYyxTQUFTLG1CQUM3QnJELEVBQUtzRCxRQUNMbEcsU0FBU21HLG9CQUFvQixVQUFXSCxHQUN4Q3BELEVBQUtrRCxlQUFlSyxvQkFBb0IsUUFBU0gsR0FFckQsRUFFQWhHLFNBQVMwRixpQkFDUCxVQUFXTSxHQUdiaEUsS0FBSzhELGVBQWVKLGlCQUNsQixRQUFTTSxFQUViLE0sb0VBQUNKLENBQUEsQ0FqQ3VCLEcsZ3ZDQ0FLLElBRVZRLEVBQWMsU0FBQUMsSSxxUkFBQUMsQ0FBQUYsRUFBQUMsR0FBQSxJLFFBQUFFLEcsRUFBQUgsRSxxckJBQ2pDLFNBQUFBLEVBQVlQLEdBQWUsTyw0RkFBQTlELENBQUEsS0FBQXFFLEdBQUFHLEVBQUFDLEtBQUEsS0FDbkJYLEVBQ1IsQ0FRQyxPLEVBUkFPLEcsRUFBQSxFQUFBaEUsSUFBQSxPQUFBQyxNQUVELFNBQUttQixFQUFNRSxHQUNUK0MsRUFBQUMsRUFBQU4sRUFBQU8sV0FBQSxhQUFBSCxLQUFBLE1BQ0EsSUFBTUksRUFBbUI1RSxLQUFLOEQsZUFBZTdGLGNBQWMsaUJBQzNEK0IsS0FBSzhELGVBQWU3RixjQUFjLHVCQUF1QnlFLFlBQWNsQixFQUN2RW9ELEVBQWlCcEMsSUFBTWQsRUFDdkJrRCxFQUFpQm5DLElBQU1qQixDQUN6QixNLG9FQUFDNEMsQ0FBQSxDQVhnQyxDQUFTUixHLGd2Q0NGYixJQUVWaUIsRUFBYSxTQUFBUixJLHFSQUFBQyxDQUFBTyxFQUFBUixHQUFBLEksUUFBQUUsRyxFQUFBTSxFLHFyQkFDaEMsU0FBQUEsRUFBQWxGLEVBQWdDa0UsR0FBZSxJQUFBakQsRUFBbENrRSxFQUFnQm5GLEVBQWhCbUYsaUJBR3lELE8sNEZBSHpDL0UsQ0FBQSxLQUFBOEUsSUFDM0JqRSxFQUFBMkQsRUFBQUMsS0FBQSxLQUFNWCxJQUNEa0Isa0JBQW9CRCxFQUN6QmxFLEVBQUtvRSxNQUFRcEUsRUFBS2tELGVBQWU3RixjQUFjLHFCQUFxQjJDLENBQ3RFLENBNkRDLE8sRUE3REFpRSxHLEVBQUEsRUFBQXpFLElBQUEsUUFBQUMsTUFFRCxXQUNFb0UsRUFBQUMsRUFBQUcsRUFBQUYsV0FBQSxjQUFBSCxLQUFBLE1BQ0F4RSxLQUFLZ0YsTUFBTUMsUUFDWGpGLEtBQUtrRixTQUNQLEdBQUMsQ0FBQTlFLElBQUEsVUFBQUMsTUFFRCxXQUNFTCxLQUFLZ0YsTUFDRi9HLGNBQWMsMEJBQ2Q4RSxNQUFNQyxXQUFhLFFBQ3hCLEdBQUMsQ0FBQTVDLElBQUEsV0FBQUMsTUFFRCxXQUNFTCxLQUFLZ0YsTUFDRi9HLGNBQWMsMEJBQ2Q4RSxNQUFNQyxXQUFhLFNBQ3hCLEdBQUMsQ0FBQTVDLElBQUEsa0JBQUFDLE1BRUQsV0FBa0IsSUFBQThFLEVBQUEsS0FLaEIsT0FKQW5GLEtBQUtvRixXQUFhcEYsS0FBSzhELGVBQWV4RixpQkFBaUIsZ0JBQ3ZEMEIsS0FBS3FGLFlBQWMsQ0FBQyxFQUNwQnJGLEtBQUtvRixXQUFXdEUsU0FBUSxTQUFBd0UsR0FBSyxPQUMzQkgsRUFBS0UsWUFBWUMsRUFBTTlELE1BQVE4RCxFQUFNakYsS0FBSyxJQUNyQ0wsS0FBS3FGLFdBQ2QsR0FBQyxDQUFBakYsSUFBQSxvQkFBQUMsTUFFRCxXQUFvQixJQUFBa0YsRUFBQSxLQUNaQyxFQUFtQixXQUN2QnhILFNBQVNtRyxvQkFBb0IsVUFBV0gsR0FDeEN1QixFQUFLekIsZUFBZUssb0JBQW9CLFFBQVNILEdBQ2pEdUIsRUFBS3pCLGVBQWVLLG9CQUFvQixTQUFVSCxFQUNwRCxFQUVNQSxFQUFpQixTQUFDWCxHQUNYLFdBQVZBLEVBQUVqRCxLQUNBaUQsRUFBRUMsT0FBT0gsVUFBVWMsU0FBUyxxQkFDNUJaLEVBQUVDLE9BQU9ILFVBQVVjLFNBQVMsMkJBQzVCWixFQUFFQyxPQUFPSCxVQUFVYyxTQUFTLGlCQUM3QnNCLEVBQUtyQixRQUNMc0IsS0FFUW5DLEVBQUVDLE9BQU9ILFVBQVVjLFNBQVMscUJBQ3BDc0IsRUFBS1Isa0JBQWtCUSxFQUFLRSxtQkFDNUJELElBQ0FELEVBQUtHLFdBRVQsRUFFQTFILFNBQVMwRixpQkFDUCxVQUFXTSxHQUdiaEUsS0FBSzhELGVBQWVKLGlCQUNsQixRQUFTTSxHQUdYaEUsS0FBSzhELGVBQWVKLGlCQUNsQixTQUFVTSxFQUVkLE0sb0VBQUNhLENBQUEsQ0FsRStCLENBQVNqQixHLGd2Q0NGWixJQUVWK0IsRUFBYyxTQUFBdEIsSSxxUkFBQUMsQ0FBQXFCLEVBQUF0QixHQUFBLEksUUFBQUUsRyxFQUFBb0IsRSxxckJBQ2pDLFNBQUFBLEVBQVk5QixHQUFlLE8sNEZBQUE5RCxDQUFBLEtBQUE0RixHQUFBcEIsRUFBQUMsS0FBQSxLQUNuQlgsRUFDUixDQU9DLE8sRUFQQThCLEcsRUFBQSxFQUFBdkYsSUFBQSxPQUFBQyxNQUVELFNBQUt1RixHQUNIbkIsRUFBQUMsRUFBQWlCLEVBQUFoQixXQUFBLGFBQUFILEtBQUEsTUFDQXhFLEtBQUs4RCxlQUNGN0YsY0FBYyxzQkFDZHlFLFlBQWNrRCxDQUNuQixNLG9FQUFDRCxDQUFBLENBVmdDLENBQVMvQixHLHVxQkNGdkJpQyxFQUFRLFdBQzNCLFNBQUFBLEVBQUFsRyxHQUFtQyxJQUF0QjZCLEVBQUk3QixFQUFKNkIsS0FBTXNFLEVBQUtuRyxFQUFMbUcsTUFBTzVILEVBQU15QixFQUFOekIsUSw0RkFBTTZCLENBQUEsS0FBQThGLEdBQzlCN0YsS0FBS3VCLE1BQVFDLEVBQ2J4QixLQUFLK0YsS0FBT0QsRUFDWjlGLEtBQUtnRyxRQUFVOUgsQ0FDakIsQyxRQWFDLE8sRUFiQTJILEcsRUFBQSxFQUFBekYsSUFBQSxjQUFBQyxNQUVELFdBQ0UsTUFBTyxDQUFDbUIsS0FBTXhCLEtBQUt1QixNQUFPdUUsTUFBTzlGLEtBQUsrRixLQUFNN0gsT0FBUThCLEtBQUtnRyxRQUMzRCxHQUFDLENBQUE1RixJQUFBLGNBQUFDLE1BRUQsV0FDRXJDLFNBQVNDLGNBQWMsdUJBQXVCeUUsWUFBYzFDLEtBQUt1QixNQUNqRXZELFNBQVNDLGNBQWMsc0JBQXNCeUUsWUFBYzFDLEtBQUsrRixJQUNsRSxHQUFDLENBQUEzRixJQUFBLFlBQUFDLE1BRUQsV0FDRXJDLFNBQVNDLGNBQWMsb0JBQW9COEUsTUFBTWtELGdCQUFrQixPQUFIQyxPQUFVbEcsS0FBS2dHLFFBQU8sSUFDeEYsTSxvRUFBQ0gsQ0FBQSxDQWxCMEIsRyx1cUJDQVJNLEVBQWEsV0FDaEMsU0FBQUEsRUFBWUMsRUFBUUMsSSw0RkFBWXRHLENBQUEsS0FBQW9HLEdBQzlCbkcsS0FBS3NHLGNBQWdCRixFQUFPcEgsYUFDNUJnQixLQUFLdUcsY0FBZ0JILEVBQU9uSCxhQUM1QmUsS0FBS3dHLGVBQWlCSixFQUFPbEgsY0FDN0JjLEtBQUt5RyxzQkFBd0JMLEVBQU9qSCxxQkFDcENhLEtBQUswRyxxQkFBdUJOLEVBQU9oSCxvQkFDbkNZLEtBQUsyRyxpQkFBbUJQLEVBQU8vRyxnQkFDL0JXLEtBQUs0RyxZQUFjUixFQUFPOUcsV0FFMUJVLEtBQUs2RyxhQUFlUixDQUN0QixDLFFBcUVDLE8sRUFyRUFGLEUsRUFBQSxFQUFBL0YsSUFBQSxrQkFBQUMsTUFFRCxTQUFnQnlHLEVBQVVDLEVBQWNDLEdBQ3RDLElBQU1DLEVBQWVILEVBQVM3SSxjQUFjLElBQURpSSxPQUFLYSxFQUFhRyxHQUFFLFdBRS9ESCxFQUFhNUQsVUFBVUMsSUFBSXBELEtBQUsyRyxrQkFDaENNLEVBQWF2RSxZQUFjc0UsRUFDM0JDLEVBQWE5RCxVQUFVQyxJQUFJcEQsS0FBSzRHLFlBQ2xDLEdBQUMsQ0FBQXhHLElBQUEsa0JBQUFDLE1BRUQsU0FBZ0J5RyxFQUFVQyxHQUN4QixJQUFNRSxFQUFlSCxFQUFTN0ksY0FBYyxJQUFEaUksT0FBS2EsRUFBYUcsR0FBRSxXQUUvREgsRUFBYTVELFVBQVVNLE9BQU96RCxLQUFLMkcsa0JBQ25DTSxFQUFhdkUsWUFBYyxHQUMzQnVFLEVBQWE5RCxVQUFVTSxPQUFPekQsS0FBSzRHLFlBQ3JDLEdBQUMsQ0FBQXhHLElBQUEsV0FBQUMsTUFFRCxTQUFTeUcsRUFBVUMsR0FDWkEsRUFBYUksU0FBU0MsTUFHekJwSCxLQUFLcUgsZ0JBQWdCUCxFQUFVQyxHQUYvQi9HLEtBQUtzSCxnQkFBZ0JSLEVBQVVDLEVBQWNBLEVBQWFRLGtCQUk5RCxHQUFDLENBQUFuSCxJQUFBLG1CQUFBQyxNQUVELFNBQWlCbUgsR0FDZixPQUFPQSxFQUFVQyxNQUFLLFNBQUFWLEdBQ3BCLE9BQVFBLEVBQWFJLFNBQVNDLEtBQ2hDLEdBQ0YsR0FBQyxDQUFBaEgsSUFBQSxxQkFBQUMsTUFFRCxTQUFtQm1ILEVBQVdFLEdBQ3hCMUgsS0FBSzJILGlCQUFpQkgsSUFDeEJFLEVBQWN2RSxVQUFVQyxJQUFJcEQsS0FBSzBHLHNCQUNqQ2dCLEVBQWNFLGFBQWEsWUFBWSxLQUV2Q0YsRUFBY3ZFLFVBQVVNLE9BQU96RCxLQUFLMEcsc0JBQ3BDZ0IsRUFBY0csZ0JBQWdCLFlBRWxDLEdBQUMsQ0FBQXpILElBQUEscUJBQUFDLE1BRUQsU0FBbUJ5SCxFQUFNaEIsR0FBVSxJQUFBbEcsRUFBQSxLQUMzQjRHLEVBQVloSSxNQUFNQyxLQUFLcUgsRUFBU3hJLGlCQUFpQjBCLEtBQUt3RyxpQkFDdERrQixFQUFnQlosRUFBUzdJLGNBQWMrQixLQUFLeUcsdUJBR2xEekcsS0FBSytILG1CQUFtQlAsRUFBV0UsR0FFbkNJLEVBQUtwRSxpQkFBaUIsVUFBVSxTQUFDTCxHQUMvQkEsRUFBRTJFLGlCQUNGQyxZQUFXLGtCQUFLckgsRUFBS21ILG1CQUFtQlAsRUFBV0UsRUFBYyxHQU5oRCxLQU9uQixJQUVBRixFQUFVMUcsU0FBUSxTQUFBaUcsR0FDaEJBLEVBQWFyRCxpQkFBaUIsU0FBUyxXQUNyQzlDLEVBQUtzSCxTQUFTcEIsRUFBVUMsR0FDeEJuRyxFQUFLbUgsbUJBQW1CUCxFQUFXRSxFQUNyQyxHQUNGLEdBQ0YsR0FBQyxDQUFBdEgsSUFBQSxtQkFBQUMsTUFFRCxXQUFtQixJQUFBOEUsRUFBQSxLQUNYMkMsRUFBTzlILEtBQUs2RyxhQUNHckgsTUFBTUMsS0FBS3FJLEVBQUt4SixpQkFBaUIwQixLQUFLdUcsZ0JBRTlDekYsU0FBUSxTQUFBZ0csR0FDbkIzQixFQUFLN0MsbUJBQW1Cd0YsRUFBTWhCLEVBQ2hDLEdBQ0YsSSx1RUFBQ1gsQ0FBQSxDQWhGK0IsRyx1cUJDZTVCZ0MsRUFBTSxJQ2ZZLFdBQ3RCLFNBQUFDLEVBQUF6SSxHQU1HLElBTEQwSSxFQUFPMUksRUFBUDBJLFFBQU9DLEVBQUEzSSxFQUNQNEksUUFDRUMsRUFBYUYsRUFBYkUsY0FDa0JDLEVBQVdILEVBQTVCLGlCLDRGQUFjdkksQ0FBQSxLQUFBcUksR0FHakJwSSxLQUFLMEksU0FBV0wsRUFDaEJySSxLQUFLMkksZUFBaUJILEVBQ3RCeEksS0FBSzRJLGFBQWVILEVBQ3BCekksS0FBSzZJLElBQU0sc0JBQ1g3SSxLQUFLOEksT0FBUyxtQkFDZDlJLEtBQUtnRyxRQUFVLDZCQUNmaEcsS0FBS3FCLE9BQVNyQixLQUFLOEksT0FBUyxTQUM5QixDLFFBbUdDLE8sRUFuR0FWLEcsRUFBQSxFQUFBaEksSUFBQSxRQUFBQyxNQUVELFNBQU0wSSxHQUNKLE9BQUdBLEVBQUlDLEdBQVdELEVBQUlFLE9BQ2ZDLFFBQVFDLE9BQU8sVUFBRGpELE9BQVc2QyxFQUFJSyxPQUFNLEtBQzVDLEdBQUMsQ0FBQWhKLElBQUEsY0FBQUMsTUFFRCxXQUFjLElBQUFPLEVBQUEsS0FDWixPQUFPeUksTUFBTXJKLEtBQUswSSxTQUFXMUksS0FBSzZJLElBQUssQ0FDckNTLE9BQVEsTUFDUmYsUUFBUyxDQUNQQyxjQUFleEksS0FBSzJJLGtCQUdyQlksTUFBSyxTQUFBUixHQUFHLE9BQUduSSxFQUFLNEksTUFBTVQsRUFBSSxHQUMvQixHQUFDLENBQUEzSSxJQUFBLGVBQUFDLE1BRUQsU0FBYVIsR0FBTSxJQUFBc0YsRUFBQSxLQUNqQixPQUFPa0UsTUFBTXJKLEtBQUswSSxTQUFXMUksS0FBSzZJLElBQUssQ0FDckNTLE9BQVEsUUFDUmYsUUFBUyxDQUNQQyxjQUFleEksS0FBSzJJLGVBQ3BCLGVBQWdCM0ksS0FBSzRJLGNBRXZCYSxLQUFNQyxLQUFLQyxVQUFVLENBQ25CbkksS0FBTTNCLEVBQUsyQixLQUNYc0UsTUFBT2pHLEVBQUtpRyxVQUdieUQsTUFBSyxTQUFBUixHQUFHLE9BQUc1RCxFQUFLcUUsTUFBTVQsRUFBSSxHQUMvQixHQUFDLENBQUEzSSxJQUFBLGFBQUFDLE1BRUQsU0FBV1IsR0FBTSxJQUFBMEYsRUFBQSxLQUNmLE9BQU84RCxNQUFNckosS0FBSzBJLFNBQVcxSSxLQUFLZ0csUUFBUyxDQUN6Q3NELE9BQVEsUUFDUmYsUUFBUyxDQUNQQyxjQUFleEksS0FBSzJJLGVBQ3BCLGVBQWdCM0ksS0FBSzRJLGNBRXZCYSxLQUFNQyxLQUFLQyxVQUFVLENBQ25CekwsT0FBUTJCLEVBQUszQixXQUdkcUwsTUFBSyxTQUFBUixHQUFHLE9BQUd4RCxFQUFLaUUsTUFBTVQsRUFBSSxHQUMvQixHQUFDLENBQUEzSSxJQUFBLFdBQUFDLE1BRUQsV0FBVyxJQUFBdUosRUFBQSxLQUNULE9BQU9QLE1BQU1ySixLQUFLMEksU0FBVzFJLEtBQUs4SSxPQUFRLENBQ3hDUSxPQUFRLE1BQ1JmLFFBQVMsQ0FDUEMsY0FBZXhJLEtBQUsySSxrQkFHckJZLE1BQUssU0FBQVIsR0FBRyxPQUFHYSxFQUFLSixNQUFNVCxFQUFJLEdBQy9CLEdBQUMsQ0FBQTNJLElBQUEsV0FBQUMsTUFFRCxTQUFTaUYsR0FBTyxJQUFBdUUsRUFBQSxLQUNkLE9BQU9SLE1BQU1ySixLQUFLMEksU0FBVzFJLEtBQUs4SSxPQUFRLENBQ3hDUSxPQUFRLE9BQ1JmLFFBQVMsQ0FDUEMsY0FBZXhJLEtBQUsySSxlQUNwQixlQUFnQjNJLEtBQUs0SSxjQUV2QmEsS0FBTUMsS0FBS0MsVUFBVSxDQUNuQm5JLEtBQU04RCxFQUFNOUQsS0FDWkUsS0FBTTRELEVBQU01RCxTQUdiNkgsTUFBSyxTQUFBUixHQUFHLE9BQUdjLEVBQUtMLE1BQU1ULEVBQUksR0FDL0IsR0FBQyxDQUFBM0ksSUFBQSxTQUFBQyxNQUVELFNBQU95SixHQUFNLElBQUFDLEVBQUEsS0FDWCxPQUFPVixNQUFNLEdBQURuRCxPQUFJbEcsS0FBSzBJLFVBQVF4QyxPQUFHbEcsS0FBSzhJLE9BQU0sS0FBQTVDLE9BQUk0RCxHQUFRLENBQ3JEUixPQUFRLFNBQ1JmLFFBQVMsQ0FDUEMsY0FBZXhJLEtBQUsySSxrQkFHckJZLE1BQUssU0FBQVIsR0FBRyxPQUFHZ0IsRUFBS1AsTUFBTVQsRUFBSSxHQUMvQixHQUFDLENBQUEzSSxJQUFBLFVBQUFDLE1BRUQsU0FBUTZHLEdBQUksSUFBQThDLEVBQUEsS0FDVixPQUFPWCxNQUFNckosS0FBSzBJLFNBQVcxSSxLQUFLcUIsT0FBUzZGLEVBQUksQ0FDN0NvQyxPQUFRLE1BQ1JmLFFBQVMsQ0FDUEMsY0FBZXhJLEtBQUsySSxrQkFHckJZLE1BQUssU0FBQVIsR0FBRyxPQUFHaUIsRUFBS1IsTUFBTVQsRUFBSSxHQUMvQixHQUFDLENBQUEzSSxJQUFBLFNBQUFDLE1BRUQsU0FBTzZHLEdBQUksSUFBQStDLEVBQUEsS0FDVCxPQUFPWixNQUFNckosS0FBSzBJLFNBQVcxSSxLQUFLcUIsT0FBUzZGLEVBQUksQ0FDN0NvQyxPQUFRLFNBQ1JmLFFBQVMsQ0FDUEMsY0FBZXhJLEtBQUsySSxrQkFHckJZLE1BQUssU0FBQVIsR0FBRyxPQUFHa0IsRUFBS1QsTUFBTVQsRUFBSSxHQUMvQixNLG9FQUFDWCxDQUFBLENBbEhxQixHRGVaLENBQVEsQ0FDbEJDLFFBQVMscUNBQ1RFLFFBQVMsQ0FDUEMsY0FBZSx1Q0FDZixlQUFnQixzQkFJZHhCLEVBQWUsSUFBSXJCLEVBQWUvRyxHQUNsQ3NMLEdBQWlCLElBQUk5RixFQUFlM0YsR0FFMUMwSixFQUFJZ0MsY0FDRFosTUFBSyxTQUFBM0csR0FDSixJQUFNd0gsRUFBTyxJQUFJdkUsRUFBU2pELEdBRTFCdUYsRUFBSWtDLFdBQ0RkLE1BQUssU0FBQWUsR0FDSixJQUNNQyxFQUFXLElBQUk3SyxFQUFTLENBQzVCRyxLQUFNeUssRUFDTnhLLFNBQVUsU0FBQ2lCLEdBQ1QsSUFBTStJLEVBQU8sSUFBSTlJLEVBQUssQ0FDcEJuQixLQUFNa0IsRUFDTkcsZ0JBQWlCLFNBQUNNLEVBQU1FLEdBQ3RCd0ksR0FBZU0sS0FBS2hKLEVBQU1FLEVBQzVCLEVBQ0FQLGtCQUFtQixTQUFDK0YsR0FDbEIsSUFBTXVELEVBQVUsSUFBSTVGLEVBQWMsQ0FDaENDLGlCQUFrQixXQUNoQnFELEVBQUl1QyxPQUFPeEQsR0FDUnFDLEtBQUtPLEVBQUthLGlCQUNWQyxPQUFNLFNBQUFDLEdBQUcsT0FBRzdELEVBQWF3RCxLQUFLSyxFQUFJLElBQ2xDQyxTQUFRLGtCQUNQN0MsV0FBV3dDLEVBQVF2RyxRQWhCaEIsSUFnQm9DLEdBRTdDLEdBQ0N4RixHQUNIK0wsRUFBUUQsTUFDVixFQUNBcEosZ0JBQWlCLFNBQUNFLEVBQU80RixHQUNuQjVGLEVBQU0yQixNQUFLLFNBQUFDLEdBQUksT0FBSUEsRUFBS3JCLE1BQVFlLEVBQVNmLEdBQUcsSUFLOUNzRyxFQUFJNEMsT0FBTzdELEdBQ1JxQyxLQUFLakksRUFBTTBKLE9BQ1hKLE9BQU0sU0FBQUMsR0FBRyxPQUFHN0QsRUFBYXdELEtBQUtLLEVBQUksSUFOckMxQyxFQUFJOEMsUUFBUS9ELEdBQ1RxQyxLQUFLakksRUFBTTRKLEtBQUt0SSxJQUNoQmdJLE9BQU0sU0FBQUMsR0FBRyxPQUFHN0QsRUFBYXdELEtBQUtLLEVBQUksR0FNekMsR0FDQy9MLEdBQ0dxTSxFQUFjckIsRUFBS3NCLGFBQ3pCdEIsRUFBS3VCLFdBQVd6SSxHQUNoQjJILEVBQVNlLFFBQVFILEVBQ25CLEdUaERhLFVTa0RmWixFQUFTZ0IsY0FFVCxJQUFNQyxFQUFlLElBQUkzRyxFQUFlLENBQ3RDQyxpQkFBa0IsU0FBQ1EsR0FDakI2QyxFQUFJc0QsU0FBU25HLEdBQ1ZpRSxNQUFLLFdBQ0pwQixFQUFJa0MsV0FDRGQsTUFBSyxTQUFBbUMsR0FDSixJQUFNNUIsRUFBTyxJQUFJOUksRUFBTSxDQUNyQm5CLEtBQU02TCxFQUFhLEdBQ25CeEssZ0JBQWlCLFNBQUNNLEVBQU1FLEdBQ3RCd0ksR0FBZU0sS0FBS2hKLEVBQU1FLEVBQzVCLEVBQ0FQLGtCQUFtQixTQUFDK0YsR0FDbEIsSUFBTXVELEVBQVUsSUFBSTVGLEVBQWMsQ0FDaENDLGlCQUFrQixXQUNoQnFELEVBQUl1QyxPQUFPeEQsR0FDUnFDLEtBQUtPLEVBQUthLGlCQUNWQyxPQUFNLFNBQUFDLEdBQUcsT0FBRzdELEVBQWF3RCxLQUFLSyxFQUFJLElBQ2xDQyxTQUFRLGtCQUNQN0MsV0FBV3dDLEVBQVF2RyxRQTNEeEIsSUEyRDRDLEdBRTdDLEdBQ0N4RixHQUNIK0wsRUFBUUQsTUFDVixFQUNBcEosZ0JBQWlCLFNBQUNFLEVBQU80RixHQUNuQjVGLEVBQU0yQixNQUFLLFNBQUFDLEdBQUksT0FBSUEsRUFBS3JCLE1BQVFlLEVBQVNmLEdBQUcsSUFLOUNzRyxFQUFJNEMsT0FBTzdELEdBQ1JxQyxLQUFLakksRUFBTTBKLE9BQ1hKLE9BQU0sU0FBQUMsR0FBRyxPQUFHN0QsRUFBYXdELEtBQUtLLEVBQUksSUFOckMxQyxFQUFJOEMsUUFBUS9ELEdBQ1RxQyxLQUFLakksRUFBTTRKLEtBQUt0SSxJQUNoQmdJLE9BQU0sU0FBQUMsR0FBRyxPQUFHN0QsRUFBYXdELEtBQUtLLEVBQUksR0FNekMsR0FDQy9MLEdBQ0dxTSxFQUFjckIsRUFBS3NCLGFBQ3pCYixFQUFTZSxRQUFRSCxFQUFhLFVBQ2hDLElBQ0NQLE9BQU0sU0FBQUMsR0FBRyxPQUFJN0QsRUFBYXdELEtBQUtLLEVBQUksSUFDbkNDLFFBQVFVLEVBQWF0SCxRQUMxQixJQUNHMEcsT0FBTSxTQUFBQyxHQUFHLE9BQUc3RCxFQUFhd0QsS0FBS0ssRUFBSSxHQUN6QyxHQUNDck0sR0FFSEwsRUFBZXdOLFFBQVUsV0FDdkIsSUFBQUMsRUFBc0I1TixTQUFTYSxNQUFNZ04sWUFBWUMsU0FBMUN0SyxFQUFJb0ssRUFBSnBLLEtBQU1zRSxFQUFLOEYsRUFBTDlGLE1BQ2JpRyxHQUFhdkIsT0FDYmhKLEVBQUtuQixNQUFRK0osRUFBSzRCLGNBQWN4SyxLQUNoQ3NFLEVBQU16RixNQUFRK0osRUFBSzRCLGNBQWNsRyxLQUNuQyxFQUVBNUgsRUFBT3lOLFFBQVUsa0JBQU1NLEdBQVd6QixNQUFNLEVBRXhDcE0sRUFBWXVOLFFBQVUsa0JBQU1ILEVBQWFoQixNQUFNLEVBRS9DSixFQUFLOEIsY0FDTDlCLEVBQUsrQixXQUNQLElBQ0N2QixPQUFNLFNBQUFDLEdBQUcsT0FBSTdELEVBQWF3RCxLQUFLSyxFQUFJLEdBQ3hDLElBQ0NELE9BQU0sU0FBQUMsR0FBRyxPQUFJN0QsRUFBYXdELEtBQUtLLEVBQUksSUFFdEMsSUFBTWtCLEdBQWUsSUFBSWxILEVBQWMsQ0FDckNDLGlCQUFrQixTQUFDUSxHQUNqQjZDLEVBQUlpRSxhQUFhOUcsR0FDZGlFLE1BQUssV0FDSnBCLEVBQUlnQyxjQUNEWixNQUFLLFNBQUEzRyxHQUNKLElBQU15SixFQUFhLElBQUl4RyxFQUFTakQsR0FDaEN5SixFQUFXSCxjQUNYL04sRUFBZXdOLFFBQVUsV0FDdkIsSUFBQVcsRUFBc0J0TyxTQUFTYSxNQUFNZ04sWUFBWUMsU0FBMUN0SyxFQUFJOEssRUFBSjlLLEtBQU1zRSxFQUFLd0csRUFBTHhHLE1BQ2JpRyxHQUFhdkIsT0FDYmhKLEVBQUtuQixNQUFRZ00sRUFBV0wsY0FBY3hLLEtBQ3RDc0UsRUFBTXpGLE1BQVFnTSxFQUFXTCxjQUFjbEcsS0FDekMsQ0FDRixJQUNDOEUsT0FBTSxTQUFBQyxHQUFHLE9BQUk3RCxFQUFhd0QsS0FBS0ssRUFBSSxJQUNuQ0MsUUFBUWlCLEdBQWE3SCxRQUUxQixJQUNDMEcsT0FBTSxTQUFBQyxHQUFHLE9BQUc3RCxFQUFhd0QsS0FBS0ssRUFBSSxHQUN2QyxHQUNDdE0sR0FFRzBOLEdBQWEsSUFBSXBILEVBQWMsQ0FDbkNDLGlCQUFrQixTQUFDUSxHQUNqQjZDLEVBQUlvRSxXQUFXakgsR0FDWmlFLE1BQUssV0FDSnBCLEVBQUlnQyxjQUNEWixNQUFLLFNBQUEzRyxHQUNpQixJQUFJaUQsRUFBU2pELEdBQ3JCdUosV0FDakIsSUFDR3ZCLE9BQU0sU0FBQUMsR0FBRyxPQUFHN0QsRUFBYXdELEtBQUtLLEVBQUksSUFDbENDLFFBQVFtQixHQUFXL0gsUUFDeEIsR0FDSixHQUNDdkYsR0FFSFksRUFBU3VCLFNBQVEsU0FBQXVGLEdBQ0YsSUFBSUYsRUFBY3BILEVBQVlzSCxHQUN0Q21HLGtCQUNQLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LTJfZXNwLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtMl9lc3AvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC0yX2VzcC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LTJfZXNwLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LTJfZXNwLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LTJfZXNwLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtMl9lc3AvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEVycm9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtMl9lc3AvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtMl9lc3AvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC0yX2VzcC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LTJfZXNwLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQnRucyBvbiBwcm9maWxlXHJcbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XHJcbmNvbnN0IGF2YXRhciA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcicpO1xyXG5jb25zdCBwcm9maWxlRm9ybUJ0biA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgY2FyZEZvcm1CdG4gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuXHJcbi8vIFBvcCB1cHNcclxuY29uc3QgcG9wdXBBY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwXCIpO1xyXG5cclxuY29uc3QgW1xyXG4gIHByb2ZpbGVGb3JtUG9wdXAsXHJcbiAgY2FyZEZvcm1Qb3B1cCxcclxuICBkaXNwbGF5Q2FyZCxcclxuICBkZWxldGVGb3JtLFxyXG4gIGF2YXRhclBvcHVwLFxyXG4gIGVycm9yUG9wdXBcclxuXSA9IHBvcHVwQWN0aXZlO1xyXG5cclxuY29uc3QgZm9ybXMgPSBkb2N1bWVudC5mb3JtcztcclxuXHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9ICcjY2FyZHMnO1xyXG5jb25zdCBjYXJkc0NvbnRhaW5lciA9ICcuY2FyZHMnO1xyXG5cclxuY29uc3QgZm9ybUNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19jb250YWluZXJcIixcclxuICBmb3JtRmllbGRTZXQ6IFwiLnBvcHVwX19jb250ZW50XCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2l0ZW1cIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3NhdmUtYnRuXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJidXR0b25faW5hY3RpdmVcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2l0ZW1fdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2l0ZW0tZXJyb3JfYWN0aXZlXCJcclxufVxyXG5cclxuY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGZvcm1zKTtcclxuXHJcbmV4cG9ydCB7XHJcbiAgcHJvZmlsZUZvcm1CdG4sIGNhcmRGb3JtQnRuLCBwcm9maWxlRm9ybVBvcHVwLCBjYXJkRm9ybVBvcHVwLFxyXG4gIGRpc3BsYXlDYXJkLCBjYXJkc0NvbnRhaW5lciwgZm9ybUNvbmZpZywgY2FyZFRlbXBsYXRlLCBmb3JtTGlzdCxcclxuICBkZWxldGVGb3JtLCBhdmF0YXJQb3B1cCwgYXZhdGFyLCBlcnJvclBvcHVwXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gZGF0YTtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCwgcG9zaXRpb24gPSAnYXBwZW5kJykge1xyXG4gICAgdGhpcy5fY29udGFpbmVyW3Bvc2l0aW9uXShlbGVtZW50KVxyXG4gIH1cclxuXHJcbiAgY2xlYXIoKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gJydcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5jbGVhcigpXHJcblxyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHtkYXRhLCBoYW5kbGVPcGVuQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVMaWtlQ2xpY2t9LCBzZWxlY3Rvcil7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX293bmVyID0gZGF0YS5vd25lcjtcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9oYW5kbGVPcGVuQ2xpY2sgPSBoYW5kbGVPcGVuQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvclxyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcikuY29udGVudDtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJykuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50XHJcbiAgfVxyXG5cclxuICByZW5kZXJDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7XHJcbiAgICBjYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fcGxhY2UtbmFtZScpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX3Nob3dOdW1iZXJMaWtlcygpXHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnRcclxuICB9XHJcblxyXG4gIGlzVmVyaWZpZWQodXNlckRhdGEpIHtcclxuICAgIHRoaXMuX2hhc0R1c3RiaW4odXNlckRhdGEpXHJcbiAgICB0aGlzLl9pc0xpa2VkKHVzZXJEYXRhKVxyXG4gIH1cclxuXHJcbiAgX2hhc0R1c3RiaW4odXNlckRhdGEpIHtcclxuICAgIGlmKHRoaXMuX293bmVyLl9pZCAhPT0gdXNlckRhdGEuX2lkKVxyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcignLmNhcmRfX3RyYXNoLWJ1dHRvbicpXHJcbiAgICAgIC5zdHlsZVxyXG4gICAgICAudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCJcclxuICB9XHJcblxyXG4gIF9pc0xpa2VkKHVzZXJEYXRhKSB7XHJcbiAgICBpZih0aGlzLl9saWtlcy5maW5kKGxpa2UgPT4gbGlrZS5faWQgPT09IHVzZXJEYXRhLl9pZCkpe1xyXG4gICAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWJ1dHRvbicpXHJcbiAgICAgICAgLmNsYXNzTGlzdFxyXG4gICAgICAgIC5hZGQoJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2hvd051bWJlckxpa2VzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2VzLWNvdW50JylcclxuICAgICAgLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoIHx8IHVuZGVmaW5lZFxyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VCdG4oZSkge1xyXG4gICAgZS50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJylcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzLl9saWtlcywgdGhpcy5faWQpXHJcbiAgICB0aGlzLl9zaG93TnVtYmVyTGlrZXMoKVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlUmVtb3ZlcigpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQuY2xvc2VzdCgnLmNhcmQnKS5yZW1vdmUoKVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJylcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlT3BlbkNsaWNrKFxyXG4gICAgICAgIHRoaXMuX25hbWUsIHRoaXMuX2xpbmspXHJcbiAgICAgIClcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHRoaXMuX2hhbmRsZUxpa2VCdG4oZSkpXHJcblxyXG4gICAgdGhpcy5fZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcignLmNhcmRfX3RyYXNoLWJ1dHRvbicpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMuX2lkKSlcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QuYWRkKCdwb3B1cF9hY3RpdmUnKTtcclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX2FjdGl2ZScpXHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGVuYWJsZUxpc3RlbmVyID0gKGUpID0+IHtcclxuICAgICAgaWYoZS5rZXkgPT09ICdFc2NhcGUnXHJcbiAgICAgIHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ0bicpXHJcbiAgICAgIHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2ltYWdlLWNvbnRhaW5lcicpXHJcbiAgICAgIHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfYWN0aXZlJykpe1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZW5hYmxlTGlzdGVuZXIpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlbmFibGVMaXN0ZW5lcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAna2V5ZG93bicsIGVuYWJsZUxpc3RlbmVyXHJcbiAgICApXHJcblxyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAnY2xpY2snLCBlbmFibGVMaXN0ZW5lclxyXG4gICAgKVxyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpXHJcbiAgfVxyXG5cclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIGNvbnN0IGRpc3BsYXlDYXJkSW1hZ2UgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX190aXRsZS1pbWFnZScpLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIGRpc3BsYXlDYXJkSW1hZ2Uuc3JjID0gbGluaztcclxuICAgIGRpc3BsYXlDYXJkSW1hZ2UuYWx0ID0gbmFtZTtcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHtoYW5kbGVGb3JtU3VibWl0fSwgcG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29udGFpbmVyJyk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB0aGlzLl9pc0RvbmUoKVxyXG4gIH1cclxuXHJcbiAgX2lzRG9uZSgpIHtcclxuICAgIHRoaXMuX2Zvcm1cclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fcHJvY2Vzc2luZy1idG4nKVxyXG4gICAgICAuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nXHJcbiAgfVxyXG4gIFxyXG4gIF9wcm9jZXNzKCkge1xyXG4gICAgdGhpcy5fZm9ybVxyXG4gICAgICAucXVlcnlTZWxlY3RvcignLnBvcHVwX19wcm9jZXNzaW5nLWJ0bicpXHJcbiAgICAgIC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnXHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faXRlbScpO1xyXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT5cclxuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKTtcclxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzXHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IHJtRXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlbmFibGVMaXN0ZW5lcik7XHJcbiAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlbmFibGVMaXN0ZW5lcik7XHJcbiAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZW5hYmxlTGlzdGVuZXIpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZW5hYmxlTGlzdGVuZXIgPSAoZSkgPT4ge1xyXG4gICAgaWYoZS5rZXkgPT09ICdFc2NhcGUnXHJcbiAgICAgIHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ0bicpXHJcbiAgICAgIHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2ltYWdlLWNvbnRhaW5lcicpXHJcbiAgICAgIHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfYWN0aXZlJykpe1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICBybUV2ZW50TGlzdGVuZXJzKClcclxuXHJcbiAgICAgIH0gZWxzZSBpZihlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19zYXZlLWJ0bicpKSB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgICBybUV2ZW50TGlzdGVuZXJzKClcclxuICAgICAgICB0aGlzLl9wcm9jZXNzKClcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICdrZXlkb3duJywgZW5hYmxlTGlzdGVuZXJcclxuICAgIClcclxuXHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICdjbGljaycsIGVuYWJsZUxpc3RlbmVyXHJcbiAgICApXHJcblxyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAnc3VibWl0JywgZW5hYmxlTGlzdGVuZXJcclxuICAgIClcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhFcnJvciBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKVxyXG4gIH1cclxuXHJcbiAgb3BlbihlcnJvcikge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3RvclxyXG4gICAgICAucXVlcnlTZWxlY3RvcignLnBvcHVwX190ZXh0LWVycm9yJylcclxuICAgICAgLnRleHRDb250ZW50ID0gZXJyb3JcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3Ioe25hbWUsIGFib3V0LCBhdmF0YXJ9KSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYiA9IGFib3V0XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBhdmF0YXJcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtuYW1lOiB0aGlzLl9uYW1lLCBhYm91dDogdGhpcy5fam9iLCBhdmF0YXI6IHRoaXMuX2F2YXRhcn1cclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3VzZXItbmFtZScpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hYm91dC1tZScpLnRleHRDb250ZW50ID0gdGhpcy5fam9iO1xyXG4gIH1cclxuXHJcbiAgc2V0QXZhdGFyKCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcicpLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9hdmF0YXJ9KWBcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KXtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9mb3JtRmllbGRTZXQgPSBjb25maWcuZm9ybUZpZWxkU2V0O1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG5cclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnRcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihmaWVsZHNldCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZpZWxkc2V0LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoZmllbGRzZXQsIGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZmllbGRzZXQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2lzVmFsaWQoZmllbGRzZXQsIGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoZmllbGRzZXQsIGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGZpZWxkc2V0LCBpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcclxuICAgIHJldHVybiBpbnB1dExpc3Quc29tZShpbnB1dEVsZW1lbnQgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKGZvcm0sIGZpZWxkc2V0KSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZpZWxkc2V0LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xyXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZpZWxkc2V0LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgY29uc3Qgd2FpdGluZ0FwaSA9IDEyMDA7XHJcblxyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcclxuXHJcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgc2V0VGltZW91dCgoKT0+IHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCksIHdhaXRpbmdBcGkpO1xyXG4gICAgfSlcclxuXHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaChpbnB1dEVsZW1lbnQgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faXNWYWxpZChmaWVsZHNldCwgaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIGNvbnN0IGZvcm0gPSB0aGlzLl9mb3JtRWxlbWVudDtcclxuICAgIGNvbnN0IGZpZWxkc2V0TGlzdCA9IEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2Zvcm1GaWVsZFNldCkpO1xyXG5cclxuICAgIGZpZWxkc2V0TGlzdC5mb3JFYWNoKGZpZWxkc2V0ID0+IHtcclxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybSwgZmllbGRzZXQpO1xyXG4gICAgfSlcclxuICB9XHJcbn0iLCJpbXBvcnR7XG4gIGNhcmRzQ29udGFpbmVyLCBmb3JtTGlzdCwgZm9ybUNvbmZpZywgcHJvZmlsZUZvcm1CdG4sIGRlbGV0ZUZvcm0sXG4gIHByb2ZpbGVGb3JtUG9wdXAsIGNhcmRGb3JtUG9wdXAsIGNhcmRGb3JtQnRuLCBkaXNwbGF5Q2FyZCwgY2FyZFRlbXBsYXRlLFxuICBhdmF0YXJQb3B1cCwgYXZhdGFyLCBlcnJvclBvcHVwXG59IGZyb20gXCIuL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBDYXJkIGZyb20gJy4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhFcnJvciBmcm9tICcuL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhFcnJvci5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0ICcuL3BhZ2VzL2luZGV4LmNzcyc7XG5pbXBvcnQgQXBpIGZyb20gJy4vc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyc7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiNGYwZWMyZDgtMGE4Mi00MDFiLWJlOTQtOGQ5M2ZkOGJjNGZjXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgfVxufSlcblxuY29uc3QgZXJyb3JNZXNzYWdlID0gbmV3IFBvcHVwV2l0aEVycm9yKGVycm9yUG9wdXApXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShkaXNwbGF5Q2FyZCk7XG5cbmFwaS5nZXRVc2VyRGF0YSgpXG4gIC50aGVuKHVzZXJEYXRhID0+IHtcbiAgICBjb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvKHVzZXJEYXRhKTtcblxuICAgIGFwaS5nZXRDYXJkcygpXG4gICAgICAudGhlbihjYXJkcyA9PiB7XG4gICAgICAgIGNvbnN0IHdhaXRpbmdBcGkgPSAyNTA7XG4gICAgICAgIGNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24gKHtcbiAgICAgICAgICBkYXRhOiBjYXJkcyxcbiAgICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XG4gICAgICAgICAgICAgIGRhdGE6IGl0ZW0sXG4gICAgICAgICAgICAgIGhhbmRsZU9wZW5DbGljazogKG5hbWUsIGxpbmspPT4ge1xuICAgICAgICAgICAgICAgIHBvcHVwV2l0aEltYWdlLm9wZW4obmFtZSwgbGluaylcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgaGFuZGxlRGVsZXRlQ2xpY2s6IChpZCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRsdEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gICAgICAgICAgICAgICAgICBoYW5kbGVGb3JtU3VibWl0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGFwaS5ybUNhcmQoaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2FyZC5oYW5kbGVSZW1vdmVyKCkpXG4gICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycj0+IGVycm9yTWVzc2FnZS5vcGVuKGVycikpXG4gICAgICAgICAgICAgICAgICAgICAgLmZpbmFsbHkoKCk9PlxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChkbHRGb3JtLmNsb3NlKCksIHdhaXRpbmdBcGkpXG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGRlbGV0ZUZvcm0pXG4gICAgICAgICAgICAgICAgZGx0Rm9ybS5vcGVuKClcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgaGFuZGxlTGlrZUNsaWNrOiAobGlrZXMsIGlkKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYoIWxpa2VzLmZpbmQobGlrZSA9PiBsaWtlLl9pZCA9PT0gdXNlckRhdGEuX2lkKSkge1xuICAgICAgICAgICAgICAgICAgYXBpLnB1dExpa2UoaWQpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGxpa2VzLnB1c2godXNlckRhdGEpKVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyPT4gZXJyb3JNZXNzYWdlLm9wZW4oZXJyKSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgYXBpLnJtTGlrZShpZClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4obGlrZXMucG9wKCkpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnI9PiBlcnJvck1lc3NhZ2Uub3BlbihlcnIpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgY2FyZFRlbXBsYXRlKTtcbiAgICAgICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5yZW5kZXJDYXJkKCk7XG4gICAgICAgICAgICBjYXJkLmlzVmVyaWZpZWQodXNlckRhdGEpXG4gICAgICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgY2FyZHNDb250YWluZXIpXG4gICAgICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKClcblxuICAgICAgICBjb25zdCB1c2VyQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSAoe1xuICAgICAgICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgYXBpLnBvc3RDYXJkKGlucHV0KVxuICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXBpLmdldENhcmRzKClcbiAgICAgICAgICAgICAgICAgIC50aGVuKG9idGFpbmVkQ2FyZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCAoe1xuICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IG9idGFpbmVkQ2FyZFswXSxcbiAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVPcGVuQ2xpY2s6IChuYW1lLCBsaW5rKSA9PiB7O1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBXaXRoSW1hZ2Uub3BlbihuYW1lLCBsaW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZURlbGV0ZUNsaWNrOiAoaWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRsdEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUZvcm1TdWJtaXQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkucm1DYXJkKGlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2FyZC5oYW5kbGVSZW1vdmVyKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyPT4gZXJyb3JNZXNzYWdlLm9wZW4oZXJyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5hbGx5KCgpPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChkbHRGb3JtLmNsb3NlKCksIHdhaXRpbmdBcGkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGRlbGV0ZUZvcm0pXG4gICAgICAgICAgICAgICAgICAgICAgICBkbHRGb3JtLm9wZW4oKVxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgaGFuZGxlTGlrZUNsaWNrOiAobGlrZXMsIGlkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZighbGlrZXMuZmluZChsaWtlID0+IGxpa2UuX2lkID09PSB1c2VyRGF0YS5faWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5wdXRMaWtlKGlkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGxpa2VzLnB1c2godXNlckRhdGEpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnI9PiBlcnJvck1lc3NhZ2Uub3BlbihlcnIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpLnJtTGlrZShpZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihsaWtlcy5wb3AoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyPT4gZXJyb3JNZXNzYWdlLm9wZW4oZXJyKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIGNhcmRUZW1wbGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLnJlbmRlckNhcmQoKTtcbiAgICAgICAgICAgICAgICAgICAgY2FyZExpc3QuYWRkSXRlbShjYXJkRWxlbWVudCwgJ3ByZXBlbmQnKVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gZXJyb3JNZXNzYWdlLm9wZW4oZXJyKSlcbiAgICAgICAgICAgICAgICAgIC5maW5hbGx5KHVzZXJDYXJkRm9ybS5jbG9zZSgpKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChlcnI9PiBlcnJvck1lc3NhZ2Uub3BlbihlcnIpKVxuICAgICAgICAgIH1cbiAgICAgICAgfSwgY2FyZEZvcm1Qb3B1cClcblxuICAgICAgICBwcm9maWxlRm9ybUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHtuYW1lLCBhYm91dH0gPSBkb2N1bWVudC5mb3Jtcy5wcm9maWxlRm9ybS5lbGVtZW50cztcbiAgICAgICAgICB1c2VySW5mb0Zvcm0ub3BlbigpO1xuICAgICAgICAgIG5hbWUudmFsdWUgPSB1c2VyLmdldFVzZXJJbmZvKCkubmFtZTtcbiAgICAgICAgICBhYm91dC52YWx1ZSA9IHVzZXIuZ2V0VXNlckluZm8oKS5hYm91dFxuICAgICAgICB9XG5cbiAgICAgICAgYXZhdGFyLm9uY2xpY2sgPSAoKSA9PiBhdmF0YXJGb3JtLm9wZW4oKVxuXG4gICAgICAgIGNhcmRGb3JtQnRuLm9uY2xpY2sgPSAoKSA9PiB1c2VyQ2FyZEZvcm0ub3BlbigpXG5cbiAgICAgICAgdXNlci5zZXRVc2VySW5mbygpO1xuICAgICAgICB1c2VyLnNldEF2YXRhcigpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnIgPT4gZXJyb3JNZXNzYWdlLm9wZW4oZXJyKSlcbiAgfSlcbiAgLmNhdGNoKGVyciA9PiBlcnJvck1lc3NhZ2Uub3BlbihlcnIpKVxuXG5jb25zdCB1c2VySW5mb0Zvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpbnB1dCkgPT4ge1xuICAgIGFwaS5zZW5kVXNlckZvcm0oaW5wdXQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGFwaS5nZXRVc2VyRGF0YSgpXG4gICAgICAgICAgLnRoZW4odXNlckRhdGE9PiB7XG4gICAgICAgICAgICBjb25zdCBlZGl0ZWRVc2VyID0gbmV3IFVzZXJJbmZvKHVzZXJEYXRhKVxuICAgICAgICAgICAgZWRpdGVkVXNlci5zZXRVc2VySW5mbygpXG4gICAgICAgICAgICBwcm9maWxlRm9ybUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCB7bmFtZSwgYWJvdXR9ID0gZG9jdW1lbnQuZm9ybXMucHJvZmlsZUZvcm0uZWxlbWVudHM7XG4gICAgICAgICAgICAgIHVzZXJJbmZvRm9ybS5vcGVuKCk7XG4gICAgICAgICAgICAgIG5hbWUudmFsdWUgPSBlZGl0ZWRVc2VyLmdldFVzZXJJbmZvKCkubmFtZTtcbiAgICAgICAgICAgICAgYWJvdXQudmFsdWUgPSBlZGl0ZWRVc2VyLmdldFVzZXJJbmZvKCkuYWJvdXRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChlcnIgPT4gZXJyb3JNZXNzYWdlLm9wZW4oZXJyKSlcbiAgICAgICAgICAuZmluYWxseSh1c2VySW5mb0Zvcm0uY2xvc2UoKSlcblxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnI9PiBlcnJvck1lc3NhZ2Uub3BlbihlcnIpKVxuICB9XG59LCBwcm9maWxlRm9ybVBvcHVwKVxuXG5jb25zdCBhdmF0YXJGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBoYW5kbGVGb3JtU3VibWl0OiAoaW5wdXQpID0+IHtcbiAgICBhcGkuc2VuZEF2YXRhcihpbnB1dClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgYXBpLmdldFVzZXJEYXRhKClcbiAgICAgICAgICAudGhlbih1c2VyRGF0YT0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVkaXRlZEF2YXRhciA9IG5ldyBVc2VySW5mbyh1c2VyRGF0YSlcbiAgICAgICAgICAgIGVkaXRlZEF2YXRhci5zZXRBdmF0YXIoKVxuICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChlcnI9PiBlcnJvck1lc3NhZ2Uub3BlbihlcnIpKVxuICAgICAgICAgIC5maW5hbGx5KGF2YXRhckZvcm0uY2xvc2UoKSlcbiAgICAgIH0pXG4gIH1cbn0sIGF2YXRhclBvcHVwKVxuXG5mb3JtTGlzdC5mb3JFYWNoKGZvcm1FbGVtZW50ID0+IHtcbiAgY29uc3QgZm9ybSA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1Db25maWcsIGZvcm1FbGVtZW50KTtcbiAgZm9ybS5lbmFibGVWYWxpZGF0aW9uKClcbn0pIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7XHJcbiAgICBiYXNlVXJsLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICBhdXRob3JpemF0aW9uLFxyXG4gICAgICBbXCJDb250ZW50LVR5cGVcIl06IENvbnRlbnRUeXBlXHJcbiAgICB9XHJcbiAgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9hdXRob3JpemF0aW9uID0gYXV0aG9yaXphdGlvbjtcclxuICAgIHRoaXMuX2NvbnRlbnRUeXBlID0gQ29udGVudFR5cGU7XHJcbiAgICB0aGlzLl9tZSA9ICcvd2ViX2VzXzA3L3VzZXJzL21lJztcclxuICAgIHRoaXMuX2NhcmRzID0gJy93ZWJfZXNfMDcvY2FyZHMnO1xyXG4gICAgdGhpcy5fYXZhdGFyID0gJy93ZWJfZXNfMDcvdXNlcnMvbWUvYXZhdGFyJztcclxuICAgIHRoaXMuX2xpa2VzID0gdGhpcy5fY2FyZHMgKyAnL2xpa2VzLydcclxuICB9XHJcblxyXG4gIF90aGVuKHJlcykge1xyXG4gICAgaWYocmVzLm9rKSByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c30uYCk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VyRGF0YSgpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgdGhpcy5fbWUsIHtcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcz0+IHRoaXMuX3RoZW4ocmVzKSlcclxuICB9XHJcblxyXG4gIHNlbmRVc2VyRm9ybShkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIHRoaXMuX21lLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgICAgXCJjb250ZW50LVR5cGVcIjogdGhpcy5fY29udGVudFR5cGVcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICBhYm91dDogZGF0YS5hYm91dFxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzPT4gdGhpcy5fdGhlbihyZXMpKVxyXG4gIH1cclxuXHJcbiAgc2VuZEF2YXRhcihkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIHRoaXMuX2F2YXRhciwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiY29udGVudC1UeXBlXCI6IHRoaXMuX2NvbnRlbnRUeXBlXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyLFxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzPT4gdGhpcy5fdGhlbihyZXMpKVxyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIHRoaXMuX2NhcmRzLCB7XHJcbiAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzPT4gdGhpcy5fdGhlbihyZXMpKVxyXG4gIH1cclxuXHJcbiAgcG9zdENhcmQoaW5wdXQpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgdGhpcy5fY2FyZHMsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IHRoaXMuX2NvbnRlbnRUeXBlXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBpbnB1dC5uYW1lLFxyXG4gICAgICAgIGxpbms6IGlucHV0LmxpbmtcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcz0+IHRoaXMuX3RoZW4ocmVzKSlcclxuICB9XHJcblxyXG4gIHJtQ2FyZChjYXJkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0ke3RoaXMuX2NhcmRzfS8ke2NhcmR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvblxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgICAudGhlbihyZXM9PiB0aGlzLl90aGVuKHJlcykpXHJcbiAgfVxyXG5cclxuICBwdXRMaWtlKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIHRoaXMuX2xpa2VzICsgaWQsIHtcclxuICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb25cclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzPT4gdGhpcy5fdGhlbihyZXMpKVxyXG4gIH1cclxuXHJcbiAgcm1MaWtlKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIHRoaXMuX2xpa2VzICsgaWQsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb25cclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzPT4gdGhpcy5fdGhlbihyZXMpKVxyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJwcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYXZhdGFyIiwicHJvZmlsZUZvcm1CdG4iLCJjYXJkRm9ybUJ0biIsIl9wb3B1cEFjdGl2ZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwcm9maWxlRm9ybVBvcHVwIiwiY2FyZEZvcm1Qb3B1cCIsImRpc3BsYXlDYXJkIiwiZGVsZXRlRm9ybSIsImF2YXRhclBvcHVwIiwiZXJyb3JQb3B1cCIsImZvcm1zIiwiY2FyZFRlbXBsYXRlIiwiZm9ybUNvbmZpZyIsImZvcm1TZWxlY3RvciIsImZvcm1GaWVsZFNldCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiZm9ybUxpc3QiLCJBcnJheSIsImZyb20iLCJTZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwiZGF0YSIsInJlbmRlcmVyIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImtleSIsInZhbHVlIiwiZWxlbWVudCIsInBvc2l0aW9uIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiaW5uZXJIVE1MIiwiX3RoaXMiLCJjbGVhciIsImZvckVhY2giLCJpdGVtIiwiQ2FyZCIsInNlbGVjdG9yIiwiaGFuZGxlT3BlbkNsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJfbGlrZXMiLCJsaWtlcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9vd25lciIsIm93bmVyIiwiX2lkIiwiX2hhbmRsZU9wZW5DbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfc2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJjYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIl9zaG93TnVtYmVyTGlrZXMiLCJ1c2VyRGF0YSIsIl9oYXNEdXN0YmluIiwiX2lzTGlrZWQiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJmaW5kIiwibGlrZSIsImNsYXNzTGlzdCIsImFkZCIsImUiLCJ0YXJnZXQiLCJ0b2dnbGUiLCJjbG9zZXN0IiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnRuIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwU2VsZWN0b3IiLCJzZXRFdmVudExpc3RlbmVycyIsImVuYWJsZUxpc3RlbmVyIiwiY29udGFpbnMiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImNhbGwiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiZGlzcGxheUNhcmRJbWFnZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsInJlc2V0IiwiX2lzRG9uZSIsIl90aGlzMiIsIl9pbnB1dExpc3QiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwiX3RoaXMzIiwicm1FdmVudExpc3RlbmVycyIsIl9nZXRJbnB1dFZhbHVlcyIsIl9wcm9jZXNzIiwiUG9wdXBXaXRoRXJyb3IiLCJlcnJvciIsIlVzZXJJbmZvIiwiYWJvdXQiLCJfam9iIiwiX2F2YXRhciIsImJhY2tncm91bmRJbWFnZSIsImNvbmNhdCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJfZm9ybUZpZWxkU2V0IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsImZpZWxkc2V0IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJzb21lIiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJmb3JtIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwicHJldmVudERlZmF1bHQiLCJzZXRUaW1lb3V0IiwiX2lzVmFsaWQiLCJhcGkiLCJBcGkiLCJiYXNlVXJsIiwiX3JlZiRoZWFkZXJzIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJDb250ZW50VHlwZSIsIl9iYXNlVXJsIiwiX2F1dGhvcml6YXRpb24iLCJfY29udGVudFR5cGUiLCJfbWUiLCJfY2FyZHMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiX3RoZW4iLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIl90aGlzNCIsIl90aGlzNSIsImNhcmQiLCJfdGhpczYiLCJfdGhpczciLCJfdGhpczgiLCJwb3B1cFdpdGhJbWFnZSIsImdldFVzZXJEYXRhIiwidXNlciIsImdldENhcmRzIiwiY2FyZHMiLCJjYXJkTGlzdCIsIm9wZW4iLCJkbHRGb3JtIiwicm1DYXJkIiwiaGFuZGxlUmVtb3ZlciIsImNhdGNoIiwiZXJyIiwiZmluYWxseSIsInJtTGlrZSIsInBvcCIsInB1dExpa2UiLCJwdXNoIiwiY2FyZEVsZW1lbnQiLCJyZW5kZXJDYXJkIiwiaXNWZXJpZmllZCIsImFkZEl0ZW0iLCJyZW5kZXJJdGVtcyIsInVzZXJDYXJkRm9ybSIsInBvc3RDYXJkIiwib2J0YWluZWRDYXJkIiwib25jbGljayIsIl9kb2N1bWVudCRmb3JtcyRwcm9maSIsInByb2ZpbGVGb3JtIiwiZWxlbWVudHMiLCJ1c2VySW5mb0Zvcm0iLCJnZXRVc2VySW5mbyIsImF2YXRhckZvcm0iLCJzZXRVc2VySW5mbyIsInNldEF2YXRhciIsInNlbmRVc2VyRm9ybSIsImVkaXRlZFVzZXIiLCJfZG9jdW1lbnQkZm9ybXMkcHJvZmkyIiwic2VuZEF2YXRhciIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9