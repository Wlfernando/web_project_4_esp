!function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var e,r=document.querySelector(".profile"),n=r.querySelector(".profile__edit-button"),o=r.querySelector(".profile__add-button"),i=(3,function(t){if(Array.isArray(t))return t}(e=r.querySelectorAll(".popup"))||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{for(i=(r=r.call(t)).next,0;!(c=(n=i.call(r)).done)&&(u.push(n.value),3!==u.length);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e)||function(e,r){if(e){if("string"==typeof e)return t(e,3);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,3):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],u=i[1],c=i[2],l=document.forms,s=l.profileForm,f=l.cardForm,p=s.elements,y=(p.profileName,p.aboutMe,f.elements),m=(y.imageName,y.imageSrc,r.querySelector(".profile__user-name"),r.querySelector(".profile__about-me"),"#cards"),v={formSelector:".popup__container",formFieldSet:".popup__content",inputSelector:".popup__item",submitButtonSelector:".popup__save-btn",inactiveButtonClass:"button_inactive",inputErrorClass:"popup__item_type_error",errorClass:"popup__item-error_active"},b=Array.from(l);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===d(o)?o:String(o)),n)}var o}var h=function(){function t(e,r){var n=e.data,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=n,this._renderer=o,this._container=document.querySelector(r)}var e,r;return e=t,(r=[{key:"addItem",value:function(t){this._container.append(t)}},{key:"addItemBegin",value:function(t){this._container.prepend(t)}},{key:"clear",value:function(){this.container.innerHTML=""}},{key:"renderItems",value:function(){var t=this;this._renderedItems.forEach((function(e){t._renderer(e)}))}}])&&_(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==S(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===S(o)?o:String(o)),n)}var o}var w=function(){function t(e,r){var n=e.data,o=e.handleOpenClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=n.name,this._link=n.link,this._handleOpenClick=o,this._selector=r}var e,r;return e=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".card").cloneNode(!0)}},{key:"renderCard",value:function(){this._element=this._getTemplate(),this._setEventListeners();var t=this._element.querySelector(".card__image");return t.src=this._link,t.alt=this._name,this._element.querySelector(".card__place-name").textContent=this._name,this._element}},{key:"_handleLikeBtn",value:function(t){t.target.classList.toggle("card__like-button_active")}},{key:"_handleRmBtn",value:function(){this._element.closest(".card").remove()}},{key:"_setEventListeners",value:function(){var t=this;this._element.querySelector(".card__image").addEventListener("click",(function(){return t._handleOpenClick(t._name,t._link)})),this._element.querySelector(".card__like-button").addEventListener("click",(function(e){return t._handleLikeBtn(e)})),this._element.querySelector(".card__trash-button").addEventListener("click",(function(){return t._handleRmBtn()}))}}])&&g(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===E(o)?o:String(o)),n)}var o}var j=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupSelector=e}var e,r;return e=t,(r=[{key:"open",value:function(){this._popupSelector.classList.add("popup_active"),this.setEventListeners()}},{key:"close",value:function(){this._popupSelector.classList.remove("popup_active")}},{key:"setEventListeners",value:function(){var t=this,e=function e(r){("Escape"===r.key||r.target.classList.contains("popup__close-btn")||r.target.classList.contains("popup__image-container")||r.target.classList.contains("popup_active"))&&(t.close(),t._removeKeydownListener=document.removeEventListener("keydown",e),t._removeClickListener=t._popupSelector.removeEventListener("click",e))};document.addEventListener("keydown",e),this._popupSelector.addEventListener("click",e)}}])&&k(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==O(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===O(o)?o:String(o)),n)}var o}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=B(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},P.apply(this,arguments)}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}function B(t){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},B(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=B(n);if(o){var r=B(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,t)}return e=a,(r=[{key:"open",value:function(t,e){P(B(a.prototype),"open",this).call(this);var r=this._popupSelector.querySelector(".popup__image");this._popupSelector.querySelector(".popup__title-image").textContent=t,r.src=e,r.alt=t}}])&&L(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(j);function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function T(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==I(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===I(o)?o:String(o)),n)}var o}function R(){return R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},R.apply(this,arguments)}function A(t,e){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A(t,e)}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(a,t);var e,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=F(n);if(o){var r=F(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===I(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t,e){var r,n=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e))._handleFormSubmit=n,r._form=r._popupSelector.querySelector(".popup__container"),r}return e=a,(r=[{key:"close",value:function(){R(F(a.prototype),"close",this).call(this),this._form.reset()}},{key:"_getInputValues",value:function(){var t=this;return this._inputList=this._popupSelector.querySelectorAll(".popup__item"),this._formValues={},this._inputList.forEach((function(e){return t._formValues[e.name]=e.value})),this._formValues}},{key:"setEventListeners",value:function(){var t=this,e=function(){document.removeEventListener("keydown",r),t._popupSelector.removeEventListener("click",r),t._popupSelector.removeEventListener("submit",r)},r=function(r){"Escape"===r.key||r.target.classList.contains("popup__close-btn")||r.target.classList.contains("popup__image-container")||r.target.classList.contains("popup_active")?(t.close(),e()):r.target.classList.contains("popup__save-btn")&&(t._handleFormSubmit(t._getInputValues()),t.close(),e())};document.addEventListener("keydown",r),this._popupSelector.addEventListener("click",r),this._popupSelector.addEventListener("submit",r)}}])&&T(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(j);function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==V(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===V(o)?o:String(o)),n)}var o}var M=function(){function t(e){var r=e.profileName,n=e.aboutMe;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=r,this._job=n}var e,r;return e=t,(r=[{key:"getUserInfo",value:function(){return{nameUser:this._name,jobUser:this._job}}},{key:"setUserInfo",value:function(){document.querySelector(".profile__user-name").textContent=this._name,document.querySelector(".profile__about-me").textContent=this._job}}])&&U(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==z(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===z(o)?o:String(o)),n)}var o}var W=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._formFieldSet=e.formFieldSet,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=r}var e,r;return e=t,(r=[{key:"_showInputError",value:function(t,e,r){var n=t.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=r,n.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t,e){var r=t.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),r.textContent="",r.classList.remove(this._errorClass)}},{key:"_isValid",value:function(t,e){e.validity.valid?this._hideInputError(t,e):this._showInputError(t,e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(t){return t.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(t,e){this._hasInvalidInput(t)?(e.classList.add(this._inactiveButtonClass),e.setAttribute("disabled",!0)):(e.classList.remove(this._inactiveButtonClass),e.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(t,e){var r=this,n=Array.from(e.querySelectorAll(this._inputSelector)),o=e.querySelector(this._submitButtonSelector);this._toggleButtonState(n,o),t.addEventListener("submit",(function(t){t.preventDefault(),setTimeout((function(){return r._toggleButtonState(n,o)}),200)})),n.forEach((function(t){t.addEventListener("input",(function(){r._isValid(e,t),r._toggleButtonState(n,o)}))}))}},{key:"enableValidation",value:function(){var t=this,e=this._formElement;Array.from(e.querySelectorAll(this._formFieldSet)).forEach((function(r){t._setEventListeners(e,r)}))}}])&&N(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),D=new h({data:[{name:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg"},{name:"Montañas Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg"},{name:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}],renderer:function(t){var e=new w({data:t,handleOpenClick:function(t,e){new q(c).open(t,e)}},m).renderCard();D.addItem(e)}},".cards"),H=new x({handleFormSubmit:function(t){var e=new w({data:t,handleOpenClick:function(t,e){new q(c).open(t,e)}},m).renderCard();D.addItemBegin(e)}},u),K=new x({handleFormSubmit:function(t){var e=new M(t);e.setUserInfo(),setTimeout((function(){return r=(t=e.getUserInfo()).nameUser,n=t.jobUser,i=(o=document.forms.profileForm.elements).profileName,a=o.aboutMe,i.value=r,void(a.value=n);var t,r,n,o,i,a}))}},a);b.forEach((function(t){new W(v,t).enableValidation()})),D.renderItems(),n.addEventListener("click",(function(){return K.open()})),o.addEventListener("click",(function(){return H.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRc0UsT0FDcEJoRyxFQUFRMEIsTUFBUXVFLEdBSEEsSUFBSGpGLEVBQUtnRixFQUFVQyxFQUM1QjZDLEVBQU8vSSxFQUFhQyxDQUl3QixHQUNoRCxHQUNDVixHQUVIc0IsRUFBU3FCLFNBQVEsU0FBQW1FLEdBQ0YsSUFBSUYsRUFBYzlGLEVBQVlnRyxHQUN0QzJDLGtCQUNQLElBRUFaLEVBQVNhLGNBQ1Q5SixFQUFleUUsaUJBQWlCLFNBQVMsa0JBQU0rRSxFQUFhTCxNQUFNLElBQ2xFbEosRUFBWXdFLGlCQUFpQixTQUFTLGtCQUFNNkUsRUFBYUgsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC0yX2VzcC8uL3NyYy9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LTJfZXNwLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtMl9lc3AvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC0yX2VzcC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC0yX2VzcC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC0yX2VzcC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LTJfZXNwLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LTJfZXNwLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtMl9lc3AvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQnRucyBvbiBwcm9maWxlXHJcbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XHJcbmNvbnN0IHByb2ZpbGVGb3JtQnRuID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBjYXJkRm9ybUJ0biA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5cclxuLy8gUG9wIHVwc1xyXG5jb25zdCBwb3B1cEFjdGl2ZSA9IHByb2ZpbGUucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cFwiKTtcclxuY29uc3QgW3Byb2ZpbGVGb3JtUG9wdXAsIGNhcmRGb3JtUG9wdXAsIGRpc3BsYXlDYXJkXSA9IHBvcHVwQWN0aXZlO1xyXG5jb25zdCBmb3JtcyA9IGRvY3VtZW50LmZvcm1zO1xyXG5jb25zdCB7cHJvZmlsZUZvcm0sIGNhcmRGb3JtfSA9IGZvcm1zO1xyXG5jb25zdCB7cHJvZmlsZU5hbWU6IGlucHV0UHJvZmlsZU5hbWUsIGFib3V0TWU6IGlucHV0QWJvdXRNZX0gPSBwcm9maWxlRm9ybS5lbGVtZW50cztcclxuY29uc3Qge2ltYWdlTmFtZTogaW5wdXRJbWFnZVRpdGxlLCBpbWFnZVNyYzogaW5wdXRJbWFnZVNyY30gPSBjYXJkRm9ybS5lbGVtZW50cztcclxuXHJcbmNvbnN0IHBhZ2VQcm9maWxlTmFtZSA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3VzZXItbmFtZScpO1xyXG5jb25zdCBwYWdlQWJvdXRNZSA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Fib3V0LW1lJyk7XHJcblxyXG5jb25zdCBjYXJkVGVtcGxhdGUgPSAnI2NhcmRzJztcclxuY29uc3QgY2FyZHNDb250YWluZXIgPSAnLmNhcmRzJztcclxuXHJcbmNvbnN0IGZvcm1Db25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fY29udGFpbmVyXCIsXHJcbiAgZm9ybUZpZWxkU2V0OiBcIi5wb3B1cF9fY29udGVudFwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pdGVtXCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zYXZlLWJ0blwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiYnV0dG9uX2luYWN0aXZlXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pdGVtX3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19pdGVtLWVycm9yX2FjdGl2ZVwiXHJcbn1cclxuXHJcbmNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShmb3Jtcyk7XHJcblxyXG5jb25zdCBkZWZhdWx0Q2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYWxsZSBkZSBZb3NlbWl0ZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy95b3NlbWl0ZS5qcGdcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWtlLWxvdWlzZS5qcGdcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJNb250YcOxYXMgQ2FsdmFzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2JhbGQtbW91bnRhaW5zLmpwZ1wiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGF0ZW1hci5qcGdcIlxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJQYXJxdWUgTmFjaW9uYWwgZGUgbGEgVmFub2lzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy92YW5vaXNlLmpwZ1wiXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhZ28uanBnXCJcclxuICB9XHJcbl07XHJcblxyXG5leHBvcnQgeyBwcm9maWxlLCBwcm9maWxlRm9ybUJ0biwgY2FyZEZvcm1CdG4sIHByb2ZpbGVGb3JtUG9wdXAsIGNhcmRGb3JtUG9wdXAsXHJcbiAgZGlzcGxheUNhcmQsIGlucHV0SW1hZ2VUaXRsZSwgaW5wdXRQcm9maWxlTmFtZSwgcGFnZVByb2ZpbGVOYW1lLCBpbnB1dEFib3V0TWUsXHJcbiAgcGFnZUFib3V0TWUsIGNhcmRGb3JtLCBpbnB1dEltYWdlU3JjLCBwcm9maWxlRm9ybSwgY2FyZHNDb250YWluZXIsXHJcbiAgZm9ybUNvbmZpZywgZGVmYXVsdENhcmRzLCBjYXJkVGVtcGxhdGUsIGZvcm1MaXN0fSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGRhdGE7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudClcbiAgfVxuXG4gIGFkZEl0ZW1CZWdpbihlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudClcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9ICcnXG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7ZGF0YSwgaGFuZGxlT3BlbkNsaWNrfSwgc2VsZWN0b3Ipe1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9oYW5kbGVPcGVuQ2xpY2sgPSBoYW5kbGVPcGVuQ2xpY2s7XG4gICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvclxuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpLmNvbnRlbnQ7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmQnKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50XG4gIH1cblxuICByZW5kZXJDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpO1xuICAgIGNhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3BsYWNlLW5hbWUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudFxuICB9XG5cbiAgX2hhbmRsZUxpa2VCdG4oZSkge1xuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpXG4gIH1cblxuICBfaGFuZGxlUm1CdG4oKSB7XG4gICAgdGhpcy5fZWxlbWVudC5jbG9zZXN0KCcuY2FyZCcpLnJlbW92ZSgpXG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVPcGVuQ2xpY2soXG4gICAgICAgIHRoaXMuX25hbWUsIHRoaXMuX2xpbmspXG4gICAgICApXG5cbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtYnV0dG9uJylcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gdGhpcy5faGFuZGxlTGlrZUJ0bihlKSlcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdHJhc2gtYnV0dG9uJylcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZVJtQnRuKCkpXG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjsgLy8gZW4gbG8gcGVyc29uYWwgbWUgdHJhZSBtw6FzIGNvbmZ1c2nDs24gcXVlIGFtYmlnw7xlZGFkIHBlcm8gYWNlcHRvXG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LmFkZCgncG9wdXBfYWN0aXZlJyk7XG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpXG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX2FjdGl2ZScpXG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBlbmFibGVMaXN0ZW5lciA9IChlKSA9PiB7XG4gICAgICBpZihlLmtleSA9PT0gJ0VzY2FwZSdcbiAgICAgIHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ0bicpXG4gICAgICB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19pbWFnZS1jb250YWluZXInKVxuICAgICAgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9hY3RpdmUnKSl7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlS2V5ZG93bkxpc3RlbmVyID0gZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGVuYWJsZUxpc3RlbmVyKTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlQ2xpY2tMaXN0ZW5lciA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlbmFibGVMaXN0ZW5lcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICdrZXlkb3duJywgZW5hYmxlTGlzdGVuZXJcbiAgICApXG5cbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnY2xpY2snLCBlbmFibGVMaXN0ZW5lclxuICAgIClcbiAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICBjb25zdCBkaXNwbGF5Q2FyZEltYWdlID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RpdGxlLWltYWdlJykudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIGRpc3BsYXlDYXJkSW1hZ2Uuc3JjID0gbGluaztcbiAgICBkaXNwbGF5Q2FyZEltYWdlLmFsdCA9IG5hbWU7XG4gIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHtoYW5kbGVGb3JtU3VibWl0fSwgcG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29udGFpbmVyJyk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faXRlbScpO1xuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PlxuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKTtcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlc1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3Qgcm1FdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlbmFibGVMaXN0ZW5lcik7XG4gICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZW5hYmxlTGlzdGVuZXIpO1xuICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlbmFibGVMaXN0ZW5lcilcbiAgICB9XG5cbiAgICBjb25zdCBlbmFibGVMaXN0ZW5lciA9IChlKSA9PiB7XG4gICAgaWYoZS5rZXkgPT09ICdFc2NhcGUnXG4gICAgICB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idG4nKVxuICAgICAgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9faW1hZ2UtY29udGFpbmVyJylcbiAgICAgIHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfYWN0aXZlJykpe1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIHJtRXZlbnRMaXN0ZW5lcnMoKVxuXG4gICAgICB9IGVsc2UgaWYoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fc2F2ZS1idG4nKSkge1xuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIHJtRXZlbnRMaXN0ZW5lcnMoKVxuICAgICAgfVxuICAgIH1cblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAna2V5ZG93bicsIGVuYWJsZUxpc3RlbmVyXG4gICAgKVxuXG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ2NsaWNrJywgZW5hYmxlTGlzdGVuZXJcbiAgICApXG5cbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnc3VibWl0JywgZW5hYmxlTGlzdGVuZXJcbiAgICApXG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHtwcm9maWxlTmFtZSwgYWJvdXRNZX0pIHtcbiAgICB0aGlzLl9uYW1lID0gcHJvZmlsZU5hbWU7XG4gICAgdGhpcy5fam9iID0gYWJvdXRNZVxuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtuYW1lVXNlcjogdGhpcy5fbmFtZSwgam9iVXNlcjogdGhpcy5fam9ifVxuICB9XG5cbiAgc2V0VXNlckluZm8oKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3VzZXItbmFtZScpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWJvdXQtbWUnKS50ZXh0Q29udGVudCA9IHRoaXMuX2pvYjtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KXtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBjb25maWcuZm9ybVNlbGVjdG9yO1xuICAgIHRoaXMuX2Zvcm1GaWVsZFNldCA9IGNvbmZpZy5mb3JtRmllbGRTZXQ7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnRcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihmaWVsZHNldCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmaWVsZHNldC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihmaWVsZHNldCwgaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZmllbGRzZXQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9pc1ZhbGlkKGZpZWxkc2V0LCBpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoZmllbGRzZXQsIGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZmllbGRzZXQsIGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoaW5wdXRFbGVtZW50ID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXG4gICAgfSlcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIGJ1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycyhmb3JtLCBmaWVsZHNldCkge1xuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZmllbGRzZXQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZpZWxkc2V0LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcblxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSwgMjAwKTtcbiAgICB9KVxuXG4gICAgaW5wdXRMaXN0LmZvckVhY2goaW5wdXRFbGVtZW50ID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgdGhpcy5faXNWYWxpZChmaWVsZHNldCwgaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICBjb25zdCBmb3JtID0gdGhpcy5fZm9ybUVsZW1lbnQ7XG4gICAgY29uc3QgZmllbGRzZXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fZm9ybUZpZWxkU2V0KSk7XG5cbiAgICBmaWVsZHNldExpc3QuZm9yRWFjaChmaWVsZHNldCA9PiB7XG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyhmb3JtLCBmaWVsZHNldCk7XG4gICAgfSlcbiAgfVxufSIsImltcG9ydHtcbiAgY2FyZHNDb250YWluZXIsIGRlZmF1bHRDYXJkcywgZm9ybUxpc3QsIGZvcm1Db25maWcsIHByb2ZpbGVGb3JtQnRuLFxuICBwcm9maWxlRm9ybVBvcHVwLCBjYXJkRm9ybVBvcHVwLCBjYXJkRm9ybUJ0biwgZGlzcGxheUNhcmQsIGNhcmRUZW1wbGF0ZVxufSBmcm9tIFwiLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0ICcuL3BhZ2VzL2luZGV4LmNzcyc7XG5cbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24gKHtcbiAgZGF0YTogZGVmYXVsdENhcmRzLFxuICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xuICAgICAgZGF0YTogaXRlbSxcbiAgICAgIGhhbmRsZU9wZW5DbGljazogKG5hbWUsIGxpbmspPT4ge1xuICAgICAgICBjb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShkaXNwbGF5Q2FyZCk7XG4gICAgICAgIHBvcHVwV2l0aEltYWdlLm9wZW4obmFtZSwgbGluayk7XG4gICAgICB9fSwgY2FyZFRlbXBsYXRlKTtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQucmVuZGVyQ2FyZCgpO1xuICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpXG4gIH1cbn0sIGNhcmRzQ29udGFpbmVyKVxuXG5jb25zdCB1c2VyQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSAoe1xuICBoYW5kbGVGb3JtU3VibWl0OiAoaW5wdXQpID0+IHtcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQgKHtcbiAgICAgIGRhdGE6IGlucHV0LFxuICAgICAgaGFuZGxlT3BlbkNsaWNrOiAobmFtZSwgbGluayk9PiB7XG4gICAgICAgIGNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKGRpc3BsYXlDYXJkKTtcbiAgICAgICAgcG9wdXBXaXRoSW1hZ2Uub3BlbihuYW1lLCBsaW5rKTtcbiAgICAgIH1cbiAgICB9LCBjYXJkVGVtcGxhdGUpXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLnJlbmRlckNhcmQoKTtcbiAgICBjYXJkTGlzdC5hZGRJdGVtQmVnaW4oY2FyZEVsZW1lbnQpXG4gIH1cbn0sIGNhcmRGb3JtUG9wdXApXG5cbmNvbnN0IHVzZXJJbmZvRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyAoaW5wdXQpO1xuICAgIHVzZXIuc2V0VXNlckluZm8oKTtcbiAgICBjb25zdCB1c2VySW5wdXQgPSAoe25hbWVVc2VyLCBqb2JVc2VyfSkgPT4ge1xuICAgICAgY29uc3Qge3Byb2ZpbGVOYW1lLCBhYm91dE1lfSA9IGRvY3VtZW50LmZvcm1zLnByb2ZpbGVGb3JtLmVsZW1lbnRzO1xuICAgICAgcHJvZmlsZU5hbWUudmFsdWUgPSBuYW1lVXNlcjtcbiAgICAgIGFib3V0TWUudmFsdWUgPSBqb2JVc2VyXG4gICAgfVxuICAgIHNldFRpbWVvdXQoKCkgPT4gdXNlcklucHV0KHVzZXIuZ2V0VXNlckluZm8oKSkpXG4gIH1cbn0sIHByb2ZpbGVGb3JtUG9wdXApXG5cbmZvcm1MaXN0LmZvckVhY2goZm9ybUVsZW1lbnQgPT4ge1xuICBjb25zdCBmb3JtID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUNvbmZpZywgZm9ybUVsZW1lbnQpO1xuICBmb3JtLmVuYWJsZVZhbGlkYXRpb24oKVxufSlcblxuY2FyZExpc3QucmVuZGVySXRlbXMoKVxucHJvZmlsZUZvcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB1c2VySW5mb0Zvcm0ub3BlbigpKVxuY2FyZEZvcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB1c2VyQ2FyZEZvcm0ub3BlbigpKSJdLCJuYW1lcyI6WyJwcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZUZvcm1CdG4iLCJjYXJkRm9ybUJ0biIsIl9wb3B1cEFjdGl2ZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwcm9maWxlRm9ybVBvcHVwIiwiY2FyZEZvcm1Qb3B1cCIsImRpc3BsYXlDYXJkIiwiZm9ybXMiLCJwcm9maWxlRm9ybSIsImNhcmRGb3JtIiwiX3Byb2ZpbGVGb3JtJGVsZW1lbnRzIiwiZWxlbWVudHMiLCJfY2FyZEZvcm0kZWxlbWVudHMiLCJwcm9maWxlTmFtZSIsImFib3V0TWUiLCJjYXJkVGVtcGxhdGUiLCJpbWFnZU5hbWUiLCJpbWFnZVNyYyIsImZvcm1Db25maWciLCJmb3JtU2VsZWN0b3IiLCJmb3JtRmllbGRTZXQiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImZvcm1MaXN0IiwiQXJyYXkiLCJmcm9tIiwiU2VjdGlvbiIsIl9yZWYiLCJjb250YWluZXJTZWxlY3RvciIsImRhdGEiLCJyZW5kZXJlciIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJrZXkiLCJ2YWx1ZSIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kIiwiY29udGFpbmVyIiwiaW5uZXJIVE1MIiwiX3RoaXMiLCJmb3JFYWNoIiwiaXRlbSIsIkNhcmQiLCJzZWxlY3RvciIsImhhbmRsZU9wZW5DbGljayIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9oYW5kbGVPcGVuQ2xpY2siLCJfc2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJjYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsImUiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJjbG9zZXN0IiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnRuIiwiX2hhbmRsZVJtQnRuIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwU2VsZWN0b3IiLCJhZGQiLCJzZXRFdmVudExpc3RlbmVycyIsImVuYWJsZUxpc3RlbmVyIiwiY29udGFpbnMiLCJjbG9zZSIsIl9yZW1vdmVLZXlkb3duTGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX3JlbW92ZUNsaWNrTGlzdGVuZXIiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImNhbGwiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiZGlzcGxheUNhcmRJbWFnZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsInJlc2V0IiwiX3RoaXMyIiwiX2lucHV0TGlzdCIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJfdGhpczMiLCJybUV2ZW50TGlzdGVuZXJzIiwiX2dldElucHV0VmFsdWVzIiwiVXNlckluZm8iLCJfam9iIiwibmFtZVVzZXIiLCJqb2JVc2VyIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2Zvcm1TZWxlY3RvciIsIl9mb3JtRmllbGRTZXQiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiZmllbGRzZXQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJjb25jYXQiLCJpZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0TGlzdCIsInNvbWUiLCJidXR0b25FbGVtZW50IiwiX2hhc0ludmFsaWRJbnB1dCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImZvcm0iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJwcmV2ZW50RGVmYXVsdCIsInNldFRpbWVvdXQiLCJfaXNWYWxpZCIsImNhcmRMaXN0IiwiY2FyZEVsZW1lbnQiLCJvcGVuIiwicmVuZGVyQ2FyZCIsImFkZEl0ZW0iLCJ1c2VyQ2FyZEZvcm0iLCJhZGRJdGVtQmVnaW4iLCJ1c2VySW5mb0Zvcm0iLCJ1c2VyIiwic2V0VXNlckluZm8iLCJnZXRVc2VySW5mbyIsIl9kb2N1bWVudCRmb3JtcyRwcm9maSIsImVuYWJsZVZhbGlkYXRpb24iLCJyZW5kZXJJdGVtcyJdLCJzb3VyY2VSb290IjoiIn0=