!function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var e,n=document.querySelector(".profile"),r=n.querySelector(".profile__avatar"),o=n.querySelector(".profile__edit-button"),i=n.querySelector(".profile__add-button"),u=(6,function(t){if(Array.isArray(t))return t}(e=document.querySelectorAll(".popup"))||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{for(i=(n=n.call(t)).next,0;!(c=(r=i.call(n)).done)&&(a.push(r.value),6!==a.length);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,6);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,6):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=u[0],c=u[1],l=u[2],s=u[3],f=u[4],p=u[5],y=document.forms,h="#cards",v={formSelector:".popup__container",formFieldSet:".popup__content",inputSelector:".popup__item",submitButtonSelector:".popup__save-btn",inactiveButtonClass:"button_inactive",inputErrorClass:"popup__item_type_error",errorClass:"popup__item-error_active"},m=Array.from(y);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===b(o)?o:String(o)),r)}var o}var _=function(){function t(e,n){var r=e.data,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var e,n;return e=t,n=[{key:"addItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";this._container[e](t)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var t=this;this.clear(),this._renderedItems.forEach((function(e){t._renderer(e)}))}}],n&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==S(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===S(o)?o:String(o)),r)}var o}var k=function(){function t(e,n){var r=e.data,o=e.handleOpenClick,i=e.handleDeleteClick,u=e.handleLikeClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._likes=r.likes,this._name=r.name,this._link=r.link,this._owner=r.owner,this._id=r._id,this._handleOpenClick=o,this._handleDeleteClick=i,this._handleLikeClick=u,this._selector=n}var e,n;return e=t,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".card").cloneNode(!0)}},{key:"renderCard",value:function(){this._element=this._getTemplate(),this._setEventListeners();var t=this._element.querySelector(".card__image");return t.src=this._link,t.alt=this._name,this._element.querySelector(".card__place-name").textContent=this._name,this._showNumberLikes(),this._element}},{key:"isVerified",value:function(t){this._hasDustbin(t),this._isLiked(t)}},{key:"_hasDustbin",value:function(t){this._owner._id!==t._id&&(this._element.querySelector(".card__trash-button").style.visibility="hidden")}},{key:"_isLiked",value:function(t){this._likes.find((function(e){return e._id===t._id}))&&this._element.querySelector(".card__like-button").classList.add("card__like-button_active")}},{key:"_showNumberLikes",value:function(){this._element.querySelector(".card__likes-count").textContent=this._likes.length||void 0}},{key:"_handleLikeBtn",value:function(t){t.target.classList.toggle("card__like-button_active"),this._handleLikeClick(this._likes,this._id),this._showNumberLikes()}},{key:"handleRemover",value:function(){this._element.closest(".card").remove()}},{key:"_setEventListeners",value:function(){var t=this;this._element.querySelector(".card__image").addEventListener("click",(function(){return t._handleOpenClick(t._name,t._link)})),this._element.querySelector(".card__like-button").addEventListener("click",(function(e){return t._handleLikeBtn(e)})),this._element.querySelector(".card__trash-button").addEventListener("click",(function(){return t._handleDeleteClick(t._id)}))}}])&&g(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}var j=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupSelector=e}var e,n;return e=t,(n=[{key:"open",value:function(){this._popupSelector.classList.add("popup_active"),this.setEventListeners()}},{key:"close",value:function(){this._popupSelector.classList.remove("popup_active")}},{key:"setEventListeners",value:function(){var t=this,e=function e(n){("Escape"===n.key||n.target.classList.contains("popup__close-btn")||n.target.classList.contains("popup__image-container")||n.target.classList.contains("popup_active"))&&(t.close(),document.removeEventListener("keydown",e),t._popupSelector.removeEventListener("click",e))};document.addEventListener("keydown",e),this._popupSelector.addEventListener("click",e)}}])&&O(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==E(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===E(o)?o:String(o)),r)}var o}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},C.apply(this,arguments)}function L(t,e){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},L(t,e)}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}var q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=T(r);if(o){var n=T(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,t)}return e=u,(n=[{key:"open",value:function(t,e){C(T(u.prototype),"open",this).call(this);var n=this._popupSelector.querySelector(".popup__image");this._popupSelector.querySelector(".popup__title-image").textContent=t,n.src=e,n.alt=t}}])&&P(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(j);function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==R(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===R(o)?o:String(o)),r)}var o}function U(){return U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},U.apply(this,arguments)}function A(t,e){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A(t,e)}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=D(r);if(o){var n=D(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n,r=t.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._handleFormSubmit=r,n._form=n._popupSelector.querySelector(".popup__container"),n}return e=u,(n=[{key:"close",value:function(){U(D(u.prototype),"close",this).call(this),this._form.reset(),this._isDone()}},{key:"_isDone",value:function(){this._form.querySelector(".popup__processing-btn").style.visibility="hidden"}},{key:"_process",value:function(){this._form.querySelector(".popup__processing-btn").style.visibility="visible"}},{key:"_getInputValues",value:function(){var t=this;return this._inputList=this._popupSelector.querySelectorAll(".popup__item"),this._formValues={},this._inputList.forEach((function(e){return t._formValues[e.name]=e.value})),this._formValues}},{key:"setEventListeners",value:function(){var t=this,e=function(){document.removeEventListener("keydown",n),t._popupSelector.removeEventListener("click",n),t._popupSelector.removeEventListener("submit",n)},n=function(n){"Escape"===n.key||n.target.classList.contains("popup__close-btn")||n.target.classList.contains("popup__image-container")||n.target.classList.contains("popup_active")?(t.close(),e()):n.target.classList.contains("popup__save-btn")&&(t._handleFormSubmit(t._getInputValues()),e(),t._process())};document.addEventListener("keydown",n),this._popupSelector.addEventListener("click",n),this._popupSelector.addEventListener("submit",n)}}])&&I(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(j);function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==z(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===z(o)?o:String(o)),r)}var o}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},F.apply(this,arguments)}function V(t,e){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},V(t,e)}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}var H=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=N(r);if(o){var n=N(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,t)}return e=u,(n=[{key:"open",value:function(t){F(N(u.prototype),"open",this).call(this),this._popupSelector.querySelector(".popup__text-error").textContent=t}}])&&x(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(j);function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==J(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===J(o)?o:String(o)),r)}var o}var G=function(){function t(e){var n=e.name,r=e.about,o=e.avatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=n,this._job=r,this._avatar=o}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._name,about:this._job,avatar:this._avatar}}},{key:"setUserInfo",value:function(){document.querySelector(".profile__user-name").textContent=this._name,document.querySelector(".profile__about-me").textContent=this._job}},{key:"setAvatar",value:function(){document.querySelector(".profile__avatar").style.backgroundImage="url(".concat(this._avatar,")")}}])&&M(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==$(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===$(o)?o:String(o)),r)}var o}var Q=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._formFieldSet=e.formFieldSet,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=n}var e,n;return e=t,n=[{key:"_showInputError",value:function(t,e,n){var r=t.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),r.textContent=n,r.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t,e){var n=t.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),n.textContent="",n.classList.remove(this._errorClass)}},{key:"_isValid",value:function(t,e){e.validity.valid?this._hideInputError(t,e):this._showInputError(t,e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(t){return t.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(t,e){this._hasInvalidInput(t)?(e.classList.add(this._inactiveButtonClass),e.setAttribute("disabled",!0)):(e.classList.remove(this._inactiveButtonClass),e.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(t,e){var n=this,r=Array.from(e.querySelectorAll(this._inputSelector)),o=e.querySelector(this._submitButtonSelector);this._toggleButtonState(r,o),t.addEventListener("submit",(function(t){t.preventDefault(),setTimeout((function(){return n._toggleButtonState(r,o)}),1200)})),r.forEach((function(t){t.addEventListener("input",(function(){n._isValid(e,t),n._toggleButtonState(r,o)}))}))}},{key:"enableValidation",value:function(){var t=this,e=this._formElement;Array.from(e.querySelectorAll(this._formFieldSet)).forEach((function(n){t._setEventListeners(e,n)}))}}],n&&K(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==W(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===W(o)?o:String(o)),r)}var o}var Y=new(function(){function t(e){var n=e.baseUrl,r=e.headers,o=r.authorization,i=r["Content-Type"];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=n,this._authorization=o,this._contentType=i,this._me="/web_es_07/users/me",this._cards="/web_es_07/cards",this._avatar="/web_es_07/users/me/avatar",this._likes=this._cards+"/likes/"}var e,n;return e=t,(n=[{key:"_then",value:function(t){return t.ok?t.json():Promise.reject("Error: ".concat(t.status,"."))}},{key:"getUserData",value:function(){var t=this;return fetch(this._baseUrl+this._me,{method:"GET",headers:{authorization:this._authorization}}).then((function(e){return t._then(e)}))}},{key:"sendUserForm",value:function(t){var e=this;return fetch(this._baseUrl+this._me,{method:"PATCH",headers:{authorization:this._authorization,"content-Type":this._contentType},body:JSON.stringify({name:t.name,about:t.about})}).then((function(t){return e._then(t)}))}},{key:"sendAvatar",value:function(t){var e=this;return fetch(this._baseUrl+this._avatar,{method:"PATCH",headers:{authorization:this._authorization,"content-Type":this._contentType},body:JSON.stringify({avatar:t.avatar})}).then((function(t){return e._then(t)}))}},{key:"getCards",value:function(){var t=this;return fetch(this._baseUrl+this._cards,{method:"GET",headers:{authorization:this._authorization}}).then((function(e){return t._then(e)}))}},{key:"postCard",value:function(t){var e=this;return fetch(this._baseUrl+this._cards,{method:"POST",headers:{authorization:this._authorization,"Content-Type":this._contentType},body:JSON.stringify({name:t.name,link:t.link})}).then((function(t){return e._then(t)}))}},{key:"rmCard",value:function(t){var e=this;return fetch("".concat(this._baseUrl).concat(this._cards,"/").concat(t),{method:"DELETE",headers:{authorization:this._authorization}}).then((function(t){return e._then(t)}))}},{key:"putLike",value:function(t){var e=this;return fetch(this._baseUrl+this._likes+t,{method:"PUT",headers:{authorization:this._authorization}}).then((function(t){return e._then(t)}))}},{key:"rmLike",value:function(t){var e=this;return fetch(this._baseUrl+this._likes+t,{method:"DELETE",headers:{authorization:this._authorization}}).then((function(t){return e._then(t)}))}}])&&X(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}())({baseUrl:"https://around.nomoreparties.co/v1",headers:{authorization:"4f0ec2d8-0a82-401b-be94-8d93fd8bc4fc","Content-Type":"application/json"}}),Z=new H(p),tt=new q(l);Y.getUserData().then((function(t){var e=new G(t);console.log(t),Y.getCards().then((function(n){var u=new _({data:n,renderer:function(e){var n=new k({data:e,handleOpenClick:function(t,e){tt.open(t,e)},handleDeleteClick:function(t){var e=new B({handleFormSubmit:function(){Y.rmCard(t).then(n.handleRemover()).catch((function(t){return Z.open(t)})).finally((function(){return setTimeout(e.close(),250)}))}},s);e.open()},handleLikeClick:function(e,n){e.find((function(e){return e._id===t._id}))?Y.rmLike(n).then(e.pop()).catch((function(t){return Z.open(t)})):Y.putLike(n).then(e.push(t)).catch((function(t){return Z.open(t)}))}},h),r=n.renderCard();n.isVerified(t),u.addItem(r)}},".cards");u.renderItems();var a=new B({handleFormSubmit:function(e){Y.postCard(e).then((function(){Y.getCards().then((function(e){var n=new k({data:e[0],handleOpenClick:function(t,e){tt.open(t,e)},handleDeleteClick:function(t){var e=new B({handleFormSubmit:function(){Y.rmCard(t).then(n.handleRemover()).catch((function(t){return Z.open(t)})).finally((function(){return setTimeout(e.close(),250)}))}},s);e.open()},handleLikeClick:function(e,n){e.find((function(e){return e._id===t._id}))?Y.rmLike(n).then(e.pop()).catch((function(t){return Z.open(t)})):Y.putLike(n).then(e.push(t)).catch((function(t){return Z.open(t)}))}},h),r=n.renderCard();u.addItem(r,"prepend")})).catch((function(t){return Z.open(t)})).finally(a.close())})).catch((function(t){return Z.open(t)}))}},c);o.onclick=function(){var t=document.forms.profileForm.elements,n=t.name,r=t.about;et.open(),n.value=e.getUserInfo().name,r.value=e.getUserInfo().about},r.onclick=function(){return nt.open()},i.onclick=function(){return a.open()},e.setUserInfo(),e.setAvatar()})).catch((function(t){return Z.open(t)}))})).catch((function(t){return Z.open(t)}));var et=new B({handleFormSubmit:function(t){Y.sendUserForm(t).then((function(){Y.getUserData().then((function(t){var e=new G(t);e.setUserInfo(),o.onclick=function(){var t=document.forms.profileForm.elements,n=t.name,r=t.about;et.open(),n.value=e.getUserInfo().name,r.value=e.getUserInfo().about}})).catch((function(t){return Z.open(t)})).finally(et.close())})).catch((function(t){return Z.open(t)}))}},a),nt=new B({handleFormSubmit:function(t){Y.sendAvatar(t).then((function(){Y.getUserData().then((function(t){new G(t).setAvatar()})).catch((function(t){return Z.open(t)})).finally(nt.close())}))}},f);m.forEach((function(t){new Q(v,t).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQ0NnRixPQUFNLFNBQUFDLEdBQUcsT0FBSS9ELEVBQWEwRCxLQUFLSyxFQUFJLElBQ25DQyxRQUFRaUIsR0FBYS9ILFFBRTFCLElBQ0M0RyxPQUFNLFNBQUFDLEdBQUcsT0FBRy9ELEVBQWEwRCxLQUFLSyxFQUFJLEdBQ3ZDLEdBQ0N4TSxHQUVHNE4sR0FBYSxJQUFJdEgsRUFBYyxDQUNuQ0MsaUJBQWtCLFNBQUNRLEdBQ2pCNkMsRUFBSXNFLFdBQVduSCxHQUNaaUUsTUFBSyxXQUNKcEIsRUFBSWdDLGNBQ0RaLE1BQUssU0FBQTNHLEdBQ2lCLElBQUlpRCxFQUFTakQsR0FDckJ5SixXQUNqQixJQUNHdkIsT0FBTSxTQUFBQyxHQUFHLE9BQUcvRCxFQUFhMEQsS0FBS0ssRUFBSSxJQUNsQ0MsUUFBUW1CLEdBQVdqSSxRQUN4QixHQUNKLEdBQ0N2RixHQUVIWSxFQUFTdUIsU0FBUSxTQUFBdUYsR0FDRixJQUFJRixFQUFjcEgsRUFBWXNILEdBQ3RDcUcsa0JBQ1AsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQtMl9lc3AvLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC0yX2VzcC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LTJfZXNwLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtMl9lc3AvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtMl9lc3AvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtMl9lc3AvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC0yX2VzcC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRXJyb3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC0yX2VzcC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC0yX2VzcC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80LTJfZXNwLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQtMl9lc3AvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBCdG5zIG9uIHByb2ZpbGVcclxuY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZVwiKTtcclxuY29uc3QgYXZhdGFyID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XHJcbmNvbnN0IHByb2ZpbGVGb3JtQnRuID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBjYXJkRm9ybUJ0biA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5cclxuLy8gUG9wIHVwc1xyXG5jb25zdCBwb3B1cEFjdGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBcIik7XHJcblxyXG5jb25zdCBbXHJcbiAgcHJvZmlsZUZvcm1Qb3B1cCxcclxuICBjYXJkRm9ybVBvcHVwLFxyXG4gIGRpc3BsYXlDYXJkLFxyXG4gIGRlbGV0ZUZvcm0sXHJcbiAgYXZhdGFyUG9wdXAsXHJcbiAgZXJyb3JQb3B1cFxyXG5dID0gcG9wdXBBY3RpdmU7XHJcblxyXG5jb25zdCBmb3JtcyA9IGRvY3VtZW50LmZvcm1zO1xyXG5cclxuY29uc3QgY2FyZFRlbXBsYXRlID0gJyNjYXJkcyc7XHJcbmNvbnN0IGNhcmRzQ29udGFpbmVyID0gJy5jYXJkcyc7XHJcblxyXG5jb25zdCBmb3JtQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2NvbnRhaW5lclwiLFxyXG4gIGZvcm1GaWVsZFNldDogXCIucG9wdXBfX2NvbnRlbnRcIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faXRlbVwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc2F2ZS1idG5cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faXRlbV90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9faXRlbS1lcnJvcl9hY3RpdmVcIlxyXG59XHJcblxyXG5jb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZm9ybXMpO1xyXG5cclxuZXhwb3J0IHtcclxuICBwcm9maWxlRm9ybUJ0biwgY2FyZEZvcm1CdG4sIHByb2ZpbGVGb3JtUG9wdXAsIGNhcmRGb3JtUG9wdXAsXHJcbiAgZGlzcGxheUNhcmQsIGNhcmRzQ29udGFpbmVyLCBmb3JtQ29uZmlnLCBjYXJkVGVtcGxhdGUsIGZvcm1MaXN0LFxyXG4gIGRlbGV0ZUZvcm0sIGF2YXRhclBvcHVwLCBhdmF0YXIsIGVycm9yUG9wdXBcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBkYXRhO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50LCBwb3NpdGlvbiA9ICdhcHBlbmQnKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXJbcG9zaXRpb25dKGVsZW1lbnQpXHJcbiAgfVxyXG5cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSAnJ1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLmNsZWFyKClcclxuXHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3Ioe2RhdGEsIGhhbmRsZU9wZW5DbGljaywgaGFuZGxlRGVsZXRlQ2xpY2ssIGhhbmRsZUxpa2VDbGlja30sIHNlbGVjdG9yKXtcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fb3duZXIgPSBkYXRhLm93bmVyO1xyXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX2hhbmRsZU9wZW5DbGljayA9IGhhbmRsZU9wZW5DbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yXHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yKS5jb250ZW50O1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmQnKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnRcclxuICB9XHJcblxyXG4gIHJlbmRlckNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICAgIGNhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19wbGFjZS1uYW1lJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fc2hvd051bWJlckxpa2VzKClcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudFxyXG4gIH1cclxuXHJcbiAgaXNWZXJpZmllZCh1c2VyRGF0YSkge1xyXG4gICAgdGhpcy5faGFzRHVzdGJpbih1c2VyRGF0YSlcclxuICAgIHRoaXMuX2lzTGlrZWQodXNlckRhdGEpXHJcbiAgfVxyXG5cclxuICBfaGFzRHVzdGJpbih1c2VyRGF0YSkge1xyXG4gICAgaWYodGhpcy5fb3duZXIuX2lkICE9PSB1c2VyRGF0YS5faWQpXHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdHJhc2gtYnV0dG9uJylcclxuICAgICAgLnN0eWxlXHJcbiAgICAgIC52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIlxyXG4gIH1cclxuXHJcbiAgX2lzTGlrZWQodXNlckRhdGEpIHtcclxuICAgIGlmKHRoaXMuX2xpa2VzLmZpbmQobGlrZSA9PiBsaWtlLl9pZCA9PT0gdXNlckRhdGEuX2lkKSl7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgICAucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtYnV0dG9uJylcclxuICAgICAgICAuY2xhc3NMaXN0XHJcbiAgICAgICAgLmFkZCgnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJylcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zaG93TnVtYmVyTGlrZXMoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZXMtY291bnQnKVxyXG4gICAgICAudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGggfHwgdW5kZWZpbmVkXHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUJ0bihlKSB7XHJcbiAgICBlLnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmUnKVxyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMuX2xpa2VzLCB0aGlzLl9pZClcclxuICAgIHRoaXMuX3Nob3dOdW1iZXJMaWtlcygpXHJcbiAgfVxyXG5cclxuICBoYW5kbGVSZW1vdmVyKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5jbG9zZXN0KCcuY2FyZCcpLnJlbW92ZSgpXHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVPcGVuQ2xpY2soXHJcbiAgICAgICAgdGhpcy5fbmFtZSwgdGhpcy5fbGluaylcclxuICAgICAgKVxyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWJ1dHRvbicpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gdGhpcy5faGFuZGxlTGlrZUJ0bihlKSlcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdHJhc2gtYnV0dG9uJylcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5faWQpKVxyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX2FjdGl2ZScpO1xyXG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpXHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfYWN0aXZlJylcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgY29uc3QgZW5hYmxlTGlzdGVuZXIgPSAoZSkgPT4ge1xyXG4gICAgICBpZihlLmtleSA9PT0gJ0VzY2FwZSdcclxuICAgICAgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UtYnRuJylcclxuICAgICAgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9faW1hZ2UtY29udGFpbmVyJylcclxuICAgICAgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9hY3RpdmUnKSl7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlbmFibGVMaXN0ZW5lcik7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGVuYWJsZUxpc3RlbmVyKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICdrZXlkb3duJywgZW5hYmxlTGlzdGVuZXJcclxuICAgIClcclxuXHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICdjbGljaycsIGVuYWJsZUxpc3RlbmVyXHJcbiAgICApXHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3RvcilcclxuICB9XHJcblxyXG4gIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgY29uc3QgZGlzcGxheUNhcmRJbWFnZSA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RpdGxlLWltYWdlJykudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgZGlzcGxheUNhcmRJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgZGlzcGxheUNhcmRJbWFnZS5hbHQgPSBuYW1lO1xyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3Ioe2hhbmRsZUZvcm1TdWJtaXR9LCBwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXInKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIHRoaXMuX2lzRG9uZSgpXHJcbiAgfVxyXG5cclxuICBfaXNEb25lKCkge1xyXG4gICAgdGhpcy5fZm9ybVxyXG4gICAgICAucXVlcnlTZWxlY3RvcignLnBvcHVwX19wcm9jZXNzaW5nLWJ0bicpXHJcbiAgICAgIC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbidcclxuICB9XHJcbiAgXHJcbiAgX3Byb2Nlc3MoKSB7XHJcbiAgICB0aGlzLl9mb3JtXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3Byb2Nlc3NpbmctYnRuJylcclxuICAgICAgLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSdcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pdGVtJyk7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PlxyXG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXNcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgY29uc3Qgcm1FdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGVuYWJsZUxpc3RlbmVyKTtcclxuICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGVuYWJsZUxpc3RlbmVyKTtcclxuICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlbmFibGVMaXN0ZW5lcilcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBlbmFibGVMaXN0ZW5lciA9IChlKSA9PiB7XHJcbiAgICBpZihlLmtleSA9PT0gJ0VzY2FwZSdcclxuICAgICAgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UtYnRuJylcclxuICAgICAgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9faW1hZ2UtY29udGFpbmVyJylcclxuICAgICAgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9hY3RpdmUnKSl7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIHJtRXZlbnRMaXN0ZW5lcnMoKVxyXG5cclxuICAgICAgfSBlbHNlIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX3NhdmUtYnRuJykpIHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgIHJtRXZlbnRMaXN0ZW5lcnMoKVxyXG4gICAgICAgIHRoaXMuX3Byb2Nlc3MoKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgJ2tleWRvd24nLCBlbmFibGVMaXN0ZW5lclxyXG4gICAgKVxyXG5cclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgJ2NsaWNrJywgZW5hYmxlTGlzdGVuZXJcclxuICAgIClcclxuXHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICdzdWJtaXQnLCBlbmFibGVMaXN0ZW5lclxyXG4gICAgKVxyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEVycm9yIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpXHJcbiAgfVxyXG5cclxuICBvcGVuKGVycm9yKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yXHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RleHQtZXJyb3InKVxyXG4gICAgICAudGV4dENvbnRlbnQgPSBlcnJvclxyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7bmFtZSwgYWJvdXQsIGF2YXRhcn0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iID0gYWJvdXRcclxuICAgIHRoaXMuX2F2YXRhciA9IGF2YXRhclxyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge25hbWU6IHRoaXMuX25hbWUsIGFib3V0OiB0aGlzLl9qb2IsIGF2YXRhcjogdGhpcy5fYXZhdGFyfVxyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oKSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdXNlci1uYW1lJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Fib3V0LW1lJykudGV4dENvbnRlbnQgPSB0aGlzLl9qb2I7XHJcbiAgfVxyXG5cclxuICBzZXRBdmF0YXIoKSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJykuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3RoaXMuX2F2YXRhcn0pYFxyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpe1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gY29uZmlnLmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2Zvcm1GaWVsZFNldCA9IGNvbmZpZy5mb3JtRmllbGRTZXQ7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudFxyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGZpZWxkc2V0LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZmllbGRzZXQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihmaWVsZHNldCwgaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmaWVsZHNldC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaXNWYWxpZChmaWVsZHNldCwgaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihmaWVsZHNldCwgaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoZmllbGRzZXQsIGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKGlucHV0RWxlbWVudCA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybSwgZmllbGRzZXQpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZmllbGRzZXQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZmllbGRzZXQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICBjb25zdCB3YWl0aW5nQXBpID0gMTIwMDtcclxuXHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xyXG5cclxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBzZXRUaW1lb3V0KCgpPT4gdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSwgd2FpdGluZ0FwaSk7XHJcbiAgICB9KVxyXG5cclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9pc1ZhbGlkKGZpZWxkc2V0LCBpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudClcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgY29uc3QgZm9ybSA9IHRoaXMuX2Zvcm1FbGVtZW50O1xyXG4gICAgY29uc3QgZmllbGRzZXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fZm9ybUZpZWxkU2V0KSk7XHJcblxyXG4gICAgZmllbGRzZXRMaXN0LmZvckVhY2goZmllbGRzZXQgPT4ge1xyXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyhmb3JtLCBmaWVsZHNldCk7XHJcbiAgICB9KVxyXG4gIH1cclxufSIsImltcG9ydHtcclxuICBjYXJkc0NvbnRhaW5lciwgZm9ybUxpc3QsIGZvcm1Db25maWcsIHByb2ZpbGVGb3JtQnRuLCBkZWxldGVGb3JtLFxyXG4gIHByb2ZpbGVGb3JtUG9wdXAsIGNhcmRGb3JtUG9wdXAsIGNhcmRGb3JtQnRuLCBkaXNwbGF5Q2FyZCwgY2FyZFRlbXBsYXRlLFxyXG4gIGF2YXRhclBvcHVwLCBhdmF0YXIsIGVycm9yUG9wdXBcclxufSBmcm9tIFwiLi9zY3JpcHRzL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IENhcmQgZnJvbSAnLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEVycm9yIGZyb20gJy4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEVycm9yLmpzJztcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgJy4vcGFnZXMvaW5kZXguY3NzJztcclxuaW1wb3J0IEFwaSBmcm9tICcuL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMnO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCI0ZjBlYzJkOC0wYTgyLTQwMWItYmU5NC04ZDkzZmQ4YmM0ZmNcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgfVxyXG59KVxyXG5cclxuY29uc3QgZXJyb3JNZXNzYWdlID0gbmV3IFBvcHVwV2l0aEVycm9yKGVycm9yUG9wdXApXHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKGRpc3BsYXlDYXJkKTtcclxuXHJcbmFwaS5nZXRVc2VyRGF0YSgpXHJcbiAgLnRoZW4odXNlckRhdGEgPT4ge1xyXG4gICAgY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyh1c2VyRGF0YSk7XHJcbiAgICBjb25zb2xlLmxvZyh1c2VyRGF0YSlcclxuXHJcbiAgICBhcGkuZ2V0Q2FyZHMoKVxyXG4gICAgICAudGhlbihjYXJkcyA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FpdGluZ0FwaSA9IDI1MDtcclxuICAgICAgICBjb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uICh7XHJcbiAgICAgICAgICBkYXRhOiBjYXJkcyxcclxuICAgICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xyXG4gICAgICAgICAgICAgIGRhdGE6IGl0ZW0sXHJcbiAgICAgICAgICAgICAgaGFuZGxlT3BlbkNsaWNrOiAobmFtZSwgbGluayk9PiB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKG5hbWUsIGxpbmspXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBoYW5kbGVEZWxldGVDbGljazogKGlkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkbHRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gICAgICAgICAgICAgICAgICBoYW5kbGVGb3JtU3VibWl0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBpLnJtQ2FyZChpZClcclxuICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGNhcmQuaGFuZGxlUmVtb3ZlcigpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycj0+IGVycm9yTWVzc2FnZS5vcGVuKGVycikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAuZmluYWxseSgoKT0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZGx0Rm9ybS5jbG9zZSgpLCB3YWl0aW5nQXBpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCBkZWxldGVGb3JtKVxyXG4gICAgICAgICAgICAgICAgZGx0Rm9ybS5vcGVuKClcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIGhhbmRsZUxpa2VDbGljazogKGxpa2VzLCBpZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYoIWxpa2VzLmZpbmQobGlrZSA9PiBsaWtlLl9pZCA9PT0gdXNlckRhdGEuX2lkKSkge1xyXG4gICAgICAgICAgICAgICAgICBhcGkucHV0TGlrZShpZClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihsaWtlcy5wdXNoKHVzZXJEYXRhKSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyPT4gZXJyb3JNZXNzYWdlLm9wZW4oZXJyKSlcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIGFwaS5ybUxpa2UoaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4obGlrZXMucG9wKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycj0+IGVycm9yTWVzc2FnZS5vcGVuKGVycikpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBjYXJkVGVtcGxhdGUpO1xyXG4gICAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQucmVuZGVyQ2FyZCgpO1xyXG4gICAgICAgICAgICBjYXJkLmlzVmVyaWZpZWQodXNlckRhdGEpXHJcbiAgICAgICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgY2FyZHNDb250YWluZXIpXHJcbiAgICAgICAgY2FyZExpc3QucmVuZGVySXRlbXMoKVxyXG5cclxuICAgICAgICBjb25zdCB1c2VyQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSAoe1xyXG4gICAgICAgICAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIGFwaS5wb3N0Q2FyZChpbnB1dClcclxuICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhcGkuZ2V0Q2FyZHMoKVxyXG4gICAgICAgICAgICAgICAgICAudGhlbihvYnRhaW5lZENhcmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCAoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgZGF0YTogb2J0YWluZWRDYXJkWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgaGFuZGxlT3BlbkNsaWNrOiAobmFtZSwgbGluaykgPT4geztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBXaXRoSW1hZ2Uub3BlbihuYW1lLCBsaW5rKTtcclxuICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVEZWxldGVDbGljazogKGlkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRsdEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRm9ybVN1Ym1pdDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpLnJtQ2FyZChpZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2FyZC5oYW5kbGVSZW1vdmVyKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnI9PiBlcnJvck1lc3NhZ2Uub3BlbihlcnIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluYWxseSgoKT0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChkbHRGb3JtLmNsb3NlKCksIHdhaXRpbmdBcGkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGRlbGV0ZUZvcm0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRsdEZvcm0ub3BlbigpXHJcbiAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgaGFuZGxlTGlrZUNsaWNrOiAobGlrZXMsIGlkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFsaWtlcy5maW5kKGxpa2UgPT4gbGlrZS5faWQgPT09IHVzZXJEYXRhLl9pZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkucHV0TGlrZShpZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGxpa2VzLnB1c2godXNlckRhdGEpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycj0+IGVycm9yTWVzc2FnZS5vcGVuKGVycikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpLnJtTGlrZShpZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGxpa2VzLnBvcCgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycj0+IGVycm9yTWVzc2FnZS5vcGVuKGVycikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCBjYXJkVGVtcGxhdGUpXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLnJlbmRlckNhcmQoKTtcclxuICAgICAgICAgICAgICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50LCAncHJlcGVuZCcpXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gZXJyb3JNZXNzYWdlLm9wZW4oZXJyKSlcclxuICAgICAgICAgICAgICAgICAgLmZpbmFsbHkodXNlckNhcmRGb3JtLmNsb3NlKCkpXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChlcnI9PiBlcnJvck1lc3NhZ2Uub3BlbihlcnIpKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIGNhcmRGb3JtUG9wdXApXHJcblxyXG4gICAgICAgIHByb2ZpbGVGb3JtQnRuLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB7bmFtZSwgYWJvdXR9ID0gZG9jdW1lbnQuZm9ybXMucHJvZmlsZUZvcm0uZWxlbWVudHM7XHJcbiAgICAgICAgICB1c2VySW5mb0Zvcm0ub3BlbigpO1xyXG4gICAgICAgICAgbmFtZS52YWx1ZSA9IHVzZXIuZ2V0VXNlckluZm8oKS5uYW1lO1xyXG4gICAgICAgICAgYWJvdXQudmFsdWUgPSB1c2VyLmdldFVzZXJJbmZvKCkuYWJvdXRcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGF2YXRhci5vbmNsaWNrID0gKCkgPT4gYXZhdGFyRm9ybS5vcGVuKClcclxuXHJcbiAgICAgICAgY2FyZEZvcm1CdG4ub25jbGljayA9ICgpID0+IHVzZXJDYXJkRm9ybS5vcGVuKClcclxuXHJcbiAgICAgICAgdXNlci5zZXRVc2VySW5mbygpO1xyXG4gICAgICAgIHVzZXIuc2V0QXZhdGFyKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnIgPT4gZXJyb3JNZXNzYWdlLm9wZW4oZXJyKSlcclxuICB9KVxyXG4gIC5jYXRjaChlcnIgPT4gZXJyb3JNZXNzYWdlLm9wZW4oZXJyKSlcclxuXHJcbmNvbnN0IHVzZXJJbmZvRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoaW5wdXQpID0+IHtcclxuICAgIGFwaS5zZW5kVXNlckZvcm0oaW5wdXQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBhcGkuZ2V0VXNlckRhdGEoKVxyXG4gICAgICAgICAgLnRoZW4odXNlckRhdGE9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVkaXRlZFVzZXIgPSBuZXcgVXNlckluZm8odXNlckRhdGEpXHJcbiAgICAgICAgICAgIGVkaXRlZFVzZXIuc2V0VXNlckluZm8oKVxyXG4gICAgICAgICAgICBwcm9maWxlRm9ybUJ0bi5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHtuYW1lLCBhYm91dH0gPSBkb2N1bWVudC5mb3Jtcy5wcm9maWxlRm9ybS5lbGVtZW50cztcclxuICAgICAgICAgICAgICB1c2VySW5mb0Zvcm0ub3BlbigpO1xyXG4gICAgICAgICAgICAgIG5hbWUudmFsdWUgPSBlZGl0ZWRVc2VyLmdldFVzZXJJbmZvKCkubmFtZTtcclxuICAgICAgICAgICAgICBhYm91dC52YWx1ZSA9IGVkaXRlZFVzZXIuZ2V0VXNlckluZm8oKS5hYm91dFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGVyciA9PiBlcnJvck1lc3NhZ2Uub3BlbihlcnIpKVxyXG4gICAgICAgICAgLmZpbmFsbHkodXNlckluZm9Gb3JtLmNsb3NlKCkpXHJcblxyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyPT4gZXJyb3JNZXNzYWdlLm9wZW4oZXJyKSlcclxuICB9XHJcbn0sIHByb2ZpbGVGb3JtUG9wdXApXHJcblxyXG5jb25zdCBhdmF0YXJGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpbnB1dCkgPT4ge1xyXG4gICAgYXBpLnNlbmRBdmF0YXIoaW5wdXQpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBhcGkuZ2V0VXNlckRhdGEoKVxyXG4gICAgICAgICAgLnRoZW4odXNlckRhdGE9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVkaXRlZEF2YXRhciA9IG5ldyBVc2VySW5mbyh1c2VyRGF0YSlcclxuICAgICAgICAgICAgZWRpdGVkQXZhdGFyLnNldEF2YXRhcigpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaChlcnI9PiBlcnJvck1lc3NhZ2Uub3BlbihlcnIpKVxyXG4gICAgICAgICAgLmZpbmFsbHkoYXZhdGFyRm9ybS5jbG9zZSgpKVxyXG4gICAgICB9KVxyXG4gIH1cclxufSwgYXZhdGFyUG9wdXApXHJcblxyXG5mb3JtTGlzdC5mb3JFYWNoKGZvcm1FbGVtZW50ID0+IHtcclxuICBjb25zdCBmb3JtID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUNvbmZpZywgZm9ybUVsZW1lbnQpO1xyXG4gIGZvcm0uZW5hYmxlVmFsaWRhdGlvbigpXHJcbn0pIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7XHJcbiAgICBiYXNlVXJsLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICBhdXRob3JpemF0aW9uLFxyXG4gICAgICBbXCJDb250ZW50LVR5cGVcIl06IENvbnRlbnRUeXBlXHJcbiAgICB9XHJcbiAgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9hdXRob3JpemF0aW9uID0gYXV0aG9yaXphdGlvbjtcclxuICAgIHRoaXMuX2NvbnRlbnRUeXBlID0gQ29udGVudFR5cGU7XHJcbiAgICB0aGlzLl9tZSA9ICcvd2ViX2VzXzA3L3VzZXJzL21lJztcclxuICAgIHRoaXMuX2NhcmRzID0gJy93ZWJfZXNfMDcvY2FyZHMnO1xyXG4gICAgdGhpcy5fYXZhdGFyID0gJy93ZWJfZXNfMDcvdXNlcnMvbWUvYXZhdGFyJztcclxuICAgIHRoaXMuX2xpa2VzID0gdGhpcy5fY2FyZHMgKyAnL2xpa2VzLydcclxuICB9XHJcblxyXG4gIF90aGVuKHJlcykge1xyXG4gICAgaWYocmVzLm9rKSByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c30uYCk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VyRGF0YSgpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgdGhpcy5fbWUsIHtcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcz0+IHRoaXMuX3RoZW4ocmVzKSlcclxuICB9XHJcblxyXG4gIHNlbmRVc2VyRm9ybShkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIHRoaXMuX21lLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgICAgXCJjb250ZW50LVR5cGVcIjogdGhpcy5fY29udGVudFR5cGVcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICBhYm91dDogZGF0YS5hYm91dFxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzPT4gdGhpcy5fdGhlbihyZXMpKVxyXG4gIH1cclxuXHJcbiAgc2VuZEF2YXRhcihkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIHRoaXMuX2F2YXRhciwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiY29udGVudC1UeXBlXCI6IHRoaXMuX2NvbnRlbnRUeXBlXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyLFxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzPT4gdGhpcy5fdGhlbihyZXMpKVxyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIHRoaXMuX2NhcmRzLCB7XHJcbiAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzPT4gdGhpcy5fdGhlbihyZXMpKVxyXG4gIH1cclxuXHJcbiAgcG9zdENhcmQoaW5wdXQpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgdGhpcy5fY2FyZHMsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IHRoaXMuX2NvbnRlbnRUeXBlXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBpbnB1dC5uYW1lLFxyXG4gICAgICAgIGxpbms6IGlucHV0LmxpbmtcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcz0+IHRoaXMuX3RoZW4ocmVzKSlcclxuICB9XHJcblxyXG4gIHJtQ2FyZChjYXJkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0ke3RoaXMuX2NhcmRzfS8ke2NhcmR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvblxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgICAudGhlbihyZXM9PiB0aGlzLl90aGVuKHJlcykpXHJcbiAgfVxyXG5cclxuICBwdXRMaWtlKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIHRoaXMuX2xpa2VzICsgaWQsIHtcclxuICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb25cclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzPT4gdGhpcy5fdGhlbihyZXMpKVxyXG4gIH1cclxuXHJcbiAgcm1MaWtlKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIHRoaXMuX2xpa2VzICsgaWQsIHtcclxuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb25cclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzPT4gdGhpcy5fdGhlbihyZXMpKVxyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJwcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYXZhdGFyIiwicHJvZmlsZUZvcm1CdG4iLCJjYXJkRm9ybUJ0biIsIl9wb3B1cEFjdGl2ZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwcm9maWxlRm9ybVBvcHVwIiwiY2FyZEZvcm1Qb3B1cCIsImRpc3BsYXlDYXJkIiwiZGVsZXRlRm9ybSIsImF2YXRhclBvcHVwIiwiZXJyb3JQb3B1cCIsImZvcm1zIiwiY2FyZFRlbXBsYXRlIiwiZm9ybUNvbmZpZyIsImZvcm1TZWxlY3RvciIsImZvcm1GaWVsZFNldCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiZm9ybUxpc3QiLCJBcnJheSIsImZyb20iLCJTZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwiZGF0YSIsInJlbmRlcmVyIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImtleSIsInZhbHVlIiwiZWxlbWVudCIsInBvc2l0aW9uIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiaW5uZXJIVE1MIiwiX3RoaXMiLCJjbGVhciIsImZvckVhY2giLCJpdGVtIiwiQ2FyZCIsInNlbGVjdG9yIiwiaGFuZGxlT3BlbkNsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJfbGlrZXMiLCJsaWtlcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9vd25lciIsIm93bmVyIiwiX2lkIiwiX2hhbmRsZU9wZW5DbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfc2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJjYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIl9zaG93TnVtYmVyTGlrZXMiLCJ1c2VyRGF0YSIsIl9oYXNEdXN0YmluIiwiX2lzTGlrZWQiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJmaW5kIiwibGlrZSIsImNsYXNzTGlzdCIsImFkZCIsImUiLCJ0YXJnZXQiLCJ0b2dnbGUiLCJjbG9zZXN0IiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnRuIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwU2VsZWN0b3IiLCJzZXRFdmVudExpc3RlbmVycyIsImVuYWJsZUxpc3RlbmVyIiwiY29udGFpbnMiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImNhbGwiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiZGlzcGxheUNhcmRJbWFnZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsInJlc2V0IiwiX2lzRG9uZSIsIl90aGlzMiIsIl9pbnB1dExpc3QiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwiX3RoaXMzIiwicm1FdmVudExpc3RlbmVycyIsIl9nZXRJbnB1dFZhbHVlcyIsIl9wcm9jZXNzIiwiUG9wdXBXaXRoRXJyb3IiLCJlcnJvciIsIlVzZXJJbmZvIiwiYWJvdXQiLCJfam9iIiwiX2F2YXRhciIsImJhY2tncm91bmRJbWFnZSIsImNvbmNhdCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJfZm9ybUZpZWxkU2V0IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsImZpZWxkc2V0IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJzb21lIiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJmb3JtIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwicHJldmVudERlZmF1bHQiLCJzZXRUaW1lb3V0IiwiX2lzVmFsaWQiLCJhcGkiLCJBcGkiLCJiYXNlVXJsIiwiX3JlZiRoZWFkZXJzIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJDb250ZW50VHlwZSIsIl9iYXNlVXJsIiwiX2F1dGhvcml6YXRpb24iLCJfY29udGVudFR5cGUiLCJfbWUiLCJfY2FyZHMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiX3RoZW4iLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIl90aGlzNCIsIl90aGlzNSIsImNhcmQiLCJfdGhpczYiLCJfdGhpczciLCJfdGhpczgiLCJwb3B1cFdpdGhJbWFnZSIsImdldFVzZXJEYXRhIiwidXNlciIsImNvbnNvbGUiLCJsb2ciLCJnZXRDYXJkcyIsImNhcmRzIiwiY2FyZExpc3QiLCJvcGVuIiwiZGx0Rm9ybSIsInJtQ2FyZCIsImhhbmRsZVJlbW92ZXIiLCJjYXRjaCIsImVyciIsImZpbmFsbHkiLCJybUxpa2UiLCJwb3AiLCJwdXRMaWtlIiwicHVzaCIsImNhcmRFbGVtZW50IiwicmVuZGVyQ2FyZCIsImlzVmVyaWZpZWQiLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJ1c2VyQ2FyZEZvcm0iLCJwb3N0Q2FyZCIsIm9idGFpbmVkQ2FyZCIsIm9uY2xpY2siLCJfZG9jdW1lbnQkZm9ybXMkcHJvZmkiLCJwcm9maWxlRm9ybSIsImVsZW1lbnRzIiwidXNlckluZm9Gb3JtIiwiZ2V0VXNlckluZm8iLCJhdmF0YXJGb3JtIiwic2V0VXNlckluZm8iLCJzZXRBdmF0YXIiLCJzZW5kVXNlckZvcm0iLCJlZGl0ZWRVc2VyIiwiX2RvY3VtZW50JGZvcm1zJHByb2ZpMiIsInNlbmRBdmF0YXIiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==